import{j as e}from"./ui-vendor-B4gDKxp2.js";import{R as q,r}from"./react-vendor-pDgKdaAw.js";import{N as b,A as z,d as H,F as R,ab as D,v as d,g as o,I as u,o as V,p as G,q as U,_,ac as $,$ as J,a0 as K,a1 as Q,a2 as W,a3 as X,a4 as Y,a5 as Z,s as ee,r as se}from"./index-j6L12q1O.js";import{T as N}from"./textarea-A0zF0cCr.js";import{D as w,a as te,b as B,c as A,d as P,e as F}from"./dialog-DOGyEP5f.js";import{E as ne}from"./empty-state-D2xduzt4.js";import{b as g}from"./businessComponentService-DQG-cBFt.js";import{L as ae}from"./lock-BkOjweJJ.js";import{P as ie}from"./plus-SMSlSsiw.js";import{S as re}from"./square-pen-OlAUrgxR.js";import{T as oe}from"./trash-2-UTmHvEBV.js";import{M as ce}from"./mail-DxgtH75o.js";import{P as le}from"./phone-BCUAcqCM.js";import"./chart-vendor-A7Ge_5Hb.js";const de=({action:c,children:m,fallback:h,showMessage:C=!0})=>{const{permissions:a,environmentInfo:l}=b();return q.useMemo(()=>{switch(c){case"flow.create":return a?.canCreateFlows??!1;case"adapter.create":return a?.canCreateAdapters??!1;case"adapter.updateConfig":return a?.canModifyAdapterConfig??!0;case"flow.import":return a?.canImportFlows??!0;case"flow.deploy":return a?.canDeployFlows??!0;case"businessComponent.create":return a?.canCreateBusinessComponents??!1;case"dataStructure.create":return a?.canCreateDataStructures??!1;case"admin.access":return a?.isAdmin??!1;default:return!0}},[a,c])?e.jsx(e.Fragment,{children:m}):h?e.jsx(e.Fragment,{children:h}):C?e.jsxs(z,{variant:"destructive",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsxs(H,{children:["This action is not available in ",l?.displayName||"this"," environment.",l?.type!=="DEVELOPMENT"&&e.jsx("span",{className:"block mt-1 text-sm",children:"Only available in development environment."})]})]}):null},we=()=>{const[c,m]=r.useState([]),[h,C]=r.useState(!0),[a,l]=r.useState(!1),[E,x]=r.useState(!1),[v,f]=r.useState(null),[t,n]=r.useState({name:"",description:"",contactEmail:"",contactPhone:""}),{toast:i}=R(),{permissions:S}=b();r.useEffect(()=>{y()},[y]);const y=r.useCallback(async()=>{const s=await g.getAllBusinessComponents();s.success&&s.data?m(s.data):i({title:"Error",description:s.error||"Failed to load businessComponents",variant:"destructive"}),C(!1)},[i]),T=async()=>{if(!t.name.trim()){i({title:"Validation Error",description:"BusinessComponent name is required",variant:"destructive"});return}const s=await g.createBusinessComponent(t);s.success&&s.data?(m(p=>[...p,s.data]),l(!1),n({name:"",description:"",contactEmail:"",contactPhone:""}),i({title:"Success",description:"BusinessComponent created successfully"})):i({title:"Error",description:s.error||"Failed to create businessComponent",variant:"destructive"})},k=async()=>{if(!v||!t.name.trim()){i({title:"Validation Error",description:"BusinessComponent name is required",variant:"destructive"});return}const s=await g.updateBusinessComponent({id:v.id,...t});s.success&&s.data?(m(p=>p.map(j=>j.id===v.id?s.data:j)),x(!1),f(null),n({name:"",description:"",contactEmail:"",contactPhone:""}),i({title:"Success",description:"BusinessComponent updated successfully"})):i({title:"Error",description:s.error||"Failed to update businessComponent",variant:"destructive"})},M=async s=>{const p=await g.deleteBusinessComponent(s.id);p.success?(m(j=>j.filter(L=>L.id!==s.id)),i({title:"Success",description:"BusinessComponent deleted successfully"})):i({title:"Error",description:p.error||"Failed to delete businessComponent",variant:"destructive"})},O=s=>{f(s),n({name:s.name,description:s.description||"",contactEmail:s.contactEmail||"",contactPhone:s.contactPhone||""}),x(!0)},I=()=>{n({name:"",description:"",contactEmail:"",contactPhone:""}),f(null)};return h?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-1/3"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(s=>e.jsx("div",{className:"h-48 bg-muted rounded"},s))})]})}):e.jsxs("div",{className:"p-6 space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[e.jsx(D,{className:"h-8 w-8"}),"BusinessComponent Management"]}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your businessComponents and organizations"})]}),e.jsx(de,{action:"businessComponent.create",showMessage:!1,children:e.jsxs(w,{open:a,onOpenChange:l,children:[e.jsx(te,{asChild:!0,children:e.jsxs(d,{onClick:()=>I(),children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Add BusinessComponent"]})}),e.jsxs(B,{children:[e.jsxs(A,{children:[e.jsx(P,{children:"Create New BusinessComponent"}),e.jsx(F,{children:"Add a new businessComponent to your system"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"name",children:"BusinessComponent Name *"}),e.jsx(u,{id:"name",value:t.name,onChange:s=>n({...t,name:s.target.value}),placeholder:"Enter businessComponent name"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"description",children:"Description"}),e.jsx(N,{id:"description",value:t.description,onChange:s=>n({...t,description:s.target.value}),placeholder:"Enter businessComponent description",rows:3})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"email",children:"Contact Email"}),e.jsx(u,{id:"email",type:"email",value:t.contactEmail,onChange:s=>n({...t,contactEmail:s.target.value}),placeholder:"contact@example.com"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"phone",children:"Contact Phone"}),e.jsx(u,{id:"phone",value:t.contactPhone,onChange:s=>n({...t,contactPhone:s.target.value}),placeholder:"+1-555-0123"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(d,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(d,{onClick:T,children:"Create BusinessComponent"})]})]})]})]})})]}),c.length===0?e.jsx(ne,{icon:D,title:"No businessComponents yet",description:"Get started by adding your first businessComponent to organize your integrations by client.",action:S?.canCreateBusinessComponents?{label:"Add BusinessComponent",onClick:()=>l(!0)}:void 0}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c&&Array.isArray(c)&&c.map(s=>e.jsxs(V,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(G,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(U,{className:"text-lg",children:s.name}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>O(s),children:e.jsx(re,{className:"h-4 w-4"})}),e.jsxs(_,{children:[e.jsx($,{asChild:!0,children:e.jsx(d,{variant:"ghost",size:"sm",children:e.jsx(oe,{className:"h-4 w-4"})})}),e.jsxs(J,{children:[e.jsxs(K,{children:[e.jsx(Q,{children:"Delete BusinessComponent"}),e.jsxs(W,{children:['Are you sure you want to delete "',s.name,'"? This action cannot be undone.']})]}),e.jsxs(X,{children:[e.jsx(Y,{children:"Cancel"}),e.jsx(Z,{onClick:()=>M(s),children:"Delete"})]})]})]})]})]}),s.description&&e.jsx(ee,{children:s.description})]}),e.jsx(se,{children:e.jsxs("div",{className:"space-y-2",children:[s.contactEmail&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(ce,{className:"h-4 w-4"}),s.contactEmail]}),s.contactPhone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(le,{className:"h-4 w-4"}),s.contactPhone]}),e.jsxs("div",{className:"text-xs text-muted-foreground pt-2",children:["Created: ",new Date(s.createdAt).toLocaleDateString()]})]})})]},s.id))}),e.jsx(w,{open:E,onOpenChange:x,children:e.jsxs(B,{children:[e.jsxs(A,{children:[e.jsx(P,{children:"Edit BusinessComponent"}),e.jsx(F,{children:"Update businessComponent information"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"edit-name",children:"BusinessComponent Name *"}),e.jsx(u,{id:"edit-name",value:t.name,onChange:s=>n({...t,name:s.target.value}),placeholder:"Enter businessComponent name"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"edit-description",children:"Description"}),e.jsx(N,{id:"edit-description",value:t.description,onChange:s=>n({...t,description:s.target.value}),placeholder:"Enter businessComponent description",rows:3})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"edit-email",children:"Contact Email"}),e.jsx(u,{id:"edit-email",type:"email",value:t.contactEmail,onChange:s=>n({...t,contactEmail:s.target.value}),placeholder:"contact@example.com"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"edit-phone",children:"Contact Phone"}),e.jsx(u,{id:"edit-phone",value:t.contactPhone,onChange:s=>n({...t,contactPhone:s.target.value}),placeholder:"+1-555-0123"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(d,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsx(d,{onClick:k,children:"Update BusinessComponent"})]})]})]})})]})};export{we as BusinessComponents};
