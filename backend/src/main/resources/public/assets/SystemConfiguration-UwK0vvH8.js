import{j as e}from"./ui-vendor-B4gDKxp2.js";import{r as o}from"./react-vendor-pDgKdaAw.js";import{u as G}from"./useQuery-DhOvYe_Z.js";import{F as J,am as H,v as t,m as y,R as U,o as N,p as C,q as w,r as b,S as R,h as T,i as L,j as z,k as d,s as W,I as u,A as Y,d as $,g as O,B as x,G as X,K as Z,ak as _,ar as S,e as ee}from"./index-j6L12q1O.js";import{u as D}from"./useMutation-D4xme40R.js";import{S as se}from"./switch-CUtIsRNU.js";import{T as ae}from"./textarea-A0zF0cCr.js";import{D as ie}from"./download-xwmUEhhU.js";import{U as te}from"./upload-CSgSnmNo.js";import{S as ne}from"./save-ByauNZNE.js";import{G as re}from"./globe-ZaJJzieo.js";import{D as ce}from"./database-XpsIHb-R.js";import{M as le}from"./mail-DxgtH75o.js";import{C as oe}from"./cpu-CwhIbxvu.js";import{L as de}from"./lock-open-Da0HOKED.js";import{L as me}from"./lock-BkOjweJJ.js";import"./chart-vendor-A7Ge_5Hb.js";const Me=()=>{const[c,K]=o.useState("general"),[l,h]=o.useState({}),[k,V]=o.useState({}),[j,q]=o.useState(""),[m,A]=o.useState("all"),{toast:p}=J(),E=H(),g=[{id:"general",code:"general",name:"General",description:"General application settings",icon:e.jsx(X,{className:"h-4 w-4"})},{id:"server",code:"server",name:"Server",description:"Server and web configurations",icon:e.jsx(re,{className:"h-4 w-4"})},{id:"database",code:"database",name:"Database",description:"Database connections and pools",icon:e.jsx(ce,{className:"h-4 w-4"})},{id:"messaging",code:"messaging",name:"Messaging",description:"Message broker configurations",icon:e.jsx(le,{className:"h-4 w-4"}),subcategories:[{id:"rabbitmq",code:"rabbitmq",name:"RabbitMQ",description:"RabbitMQ settings",icon:null},{id:"kafka",code:"kafka",name:"Kafka",description:"Apache Kafka settings",icon:null}]},{id:"security",code:"security",name:"Security",description:"Security and authentication",icon:e.jsx(Z,{className:"h-4 w-4"}),subcategories:[{id:"jwt",code:"jwt",name:"JWT",description:"JWT authentication",icon:null},{id:"oauth2",code:"oauth2",name:"OAuth2",description:"OAuth2 settings",icon:null},{id:"cors",code:"cors",name:"CORS",description:"CORS settings",icon:null}]},{id:"monitoring",code:"monitoring",name:"Monitoring",description:"Monitoring and metrics",icon:e.jsx(_,{className:"h-4 w-4"})},{id:"integrations",code:"integrations",name:"Integrations",description:"Third-party integrations",icon:e.jsx(oe,{className:"h-4 w-4"}),subcategories:[{id:"camunda",code:"camunda",name:"Camunda",description:"Camunda BPM",icon:null},{id:"hazelcast",code:"hazelcast",name:"Hazelcast",description:"Hazelcast cache",icon:null}]}],{data:P,isLoading:F,error:B}=G({queryKey:["configurations",c,m],queryFn:()=>S.getConfigurationsByCategory(c,m==="all"?void 0:m)}),f=D({mutationFn:s=>S.updateConfigurations(s),onSuccess:()=>{p({title:"Success",description:"Configurations saved successfully"}),E.invalidateQueries({queryKey:["configurations"]}),h({})},onError:s=>{p({title:"Error",description:"Failed to save configurations",variant:"destructive"})}}),v=D({mutationFn:()=>S.refreshConfigurations(),onSuccess:()=>{p({title:"Success",description:"Configurations refreshed from database"}),E.invalidateQueries({queryKey:["configurations"]})}}),n=(s,i)=>{h(r=>({...r,[s]:i}))},I=s=>{const i=l[s.configKey]??s.configValue,r=l.hasOwnProperty(s.configKey);switch(s.configType){case"BOOLEAN":return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(se,{id:s.configKey,checked:i==="true",onCheckedChange:a=>n(s.configKey,a.toString())}),e.jsx(O,{htmlFor:s.configKey,children:i==="true"?"Enabled":"Disabled"})]});case"NUMBER":return e.jsx(u,{type:"number",value:i,onChange:a=>n(s.configKey,a.target.value),className:r?"border-blue-500":""});case"JSON":case"YAML":return e.jsx(ae,{value:i,onChange:a=>n(s.configKey,a.target.value),className:`font-mono text-sm ${r?"border-blue-500":""}`,rows:4});case"ENCRYPTED":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{type:k[s.configKey]?"text":"password",value:i,onChange:a=>n(s.configKey,a.target.value),className:r?"border-blue-500":""}),e.jsx(t,{type:"button",variant:"ghost",size:"sm",onClick:()=>V(a=>({...a,[s.configKey]:!a[s.configKey]})),children:k[s.configKey]?e.jsx(de,{className:"h-4 w-4"}):e.jsx(me,{className:"h-4 w-4"})})]}),s.isSensitive&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx(ee,{className:"inline h-3 w-3 mr-1"}),"This value is encrypted and sensitive"]})]});default:return s.allowedValues&&s.allowedValues.length>0?e.jsxs(R,{value:i,onValueChange:a=>n(s.configKey,a),children:[e.jsx(T,{className:r?"border-blue-500":"",children:e.jsx(L,{})}),e.jsx(z,{children:s.allowedValues.map(a=>e.jsx(d,{value:a,children:a},a))})]}):e.jsx(u,{type:"text",value:i,onChange:a=>n(s.configKey,a.target.value),className:r?"border-blue-500":""})}},M=P?.filter(s=>s.configKey.toLowerCase().includes(j.toLowerCase())||s.description?.toLowerCase().includes(j.toLowerCase()))||[],Q=Object.keys(l).length>0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"System Configuration"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage system-wide configurations and settings"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>v.mutate(),disabled:v.isPending,children:[v.isPending?e.jsx(y,{className:"h-4 w-4 animate-spin"}):e.jsx(U,{className:"h-4 w-4"}),"Refresh"]}),e.jsxs(t,{variant:"outline",size:"sm",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsxs(t,{variant:"outline",size:"sm",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Import"]})]})]}),e.jsxs("div",{className:"flex space-x-6",children:[e.jsxs("div",{className:"w-64 space-y-2",children:[e.jsxs(N,{children:[e.jsx(C,{children:e.jsx(w,{className:"text-sm",children:"Categories"})}),e.jsx(b,{className:"space-y-1",children:g.map(s=>e.jsxs("div",{children:[e.jsxs(t,{variant:c===s.code?"secondary":"ghost",className:"w-full justify-start",onClick:()=>K(s.code),children:[s.icon,e.jsx("span",{className:"ml-2",children:s.name})]}),s.subcategories&&c===s.code&&e.jsx("div",{className:"ml-6 mt-1 space-y-1",children:s.subcategories.map(i=>e.jsx(t,{variant:"ghost",size:"sm",className:"w-full justify-start text-xs",onClick:()=>K(i.code),children:i.name},i.id))})]},s.id))})]}),e.jsxs(N,{children:[e.jsx(C,{children:e.jsx(w,{className:"text-sm",children:"Environment"})}),e.jsx(b,{children:e.jsxs(R,{value:m,onValueChange:A,children:[e.jsx(T,{children:e.jsx(L,{})}),e.jsxs(z,{children:[e.jsx(d,{value:"all",children:"All Environments"}),e.jsx(d,{value:"dev",children:"Development"}),e.jsx(d,{value:"test",children:"Testing"}),e.jsx(d,{value:"prod",children:"Production"})]})]})})]})]}),e.jsx("div",{className:"flex-1",children:e.jsxs(N,{children:[e.jsx(C,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(w,{children:[g.find(s=>s.code===c)?.name," Configuration"]}),e.jsx(W,{children:g.find(s=>s.code===c)?.description})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{type:"search",placeholder:"Search configurations...",value:j,onChange:s=>q(s.target.value),className:"w-64"}),Q&&e.jsxs(e.Fragment,{children:[e.jsx(t,{variant:"outline",size:"sm",onClick:()=>h({}),children:"Cancel"}),e.jsxs(t,{size:"sm",onClick:()=>f.mutate(l),disabled:f.isPending,children:[f.isPending?e.jsx(y,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})]})}),e.jsx(b,{children:F?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(y,{className:"h-8 w-8 animate-spin"})}):B?e.jsx(Y,{variant:"destructive",children:e.jsx($,{children:"Failed to load configurations. Please try again."})}):M.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No configurations found"}):e.jsx("div",{className:"space-y-6",children:M.map(s=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(O,{htmlFor:s.configKey,className:"text-sm font-medium",children:s.configKey}),s.isRequired&&e.jsx(x,{variant:"secondary",className:"text-xs",children:"Required"}),s.environment&&e.jsx(x,{variant:"outline",className:"text-xs",children:s.environment}),s.profile&&e.jsx(x,{variant:"outline",className:"text-xs",children:s.profile}),l.hasOwnProperty(s.configKey)&&e.jsx(x,{className:"text-xs",children:"Modified"})]}),s.defaultValue&&e.jsx(t,{variant:"ghost",size:"sm",onClick:()=>n(s.configKey,s.defaultValue),children:"Reset to default"})]}),I(s),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),s.validationRules&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Validation: ",JSON.stringify(s.validationRules)]})]},s.id))})})]})})]})]})};export{Me as default};
