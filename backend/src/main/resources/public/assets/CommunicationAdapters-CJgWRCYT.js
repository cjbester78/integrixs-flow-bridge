import{j as e}from"./ui-vendor-B4gDKxp2.js";import{u as ce,r as a}from"./react-vendor-pDgKdaAw.js";import{w as oe,N as de,F as he,l as n,L as i,a as U,v as m,o as V,p as Y,q as H,r as q,I as ue,S as D,h as b,i as E,j as M,k as o,O as me,R as pe,B as F,Q as xe,V as je,W as fe,X as ge,Y as $,Z as d,m as Ce}from"./index-BgQC9CM8.js";import{T as ve,a as we,b as z,c as l,d as Se,e as c}from"./table-Mlgye53F.js";import{D as Ae,b as ye,c as Ne,d as Te,e as De,f as be}from"./dialog-Y0RrrX5c.js";import{T as Ee,b as w}from"./index-D-1EdYrq.js";import{P as Me}from"./plus-DX1aRrf7.js";import{F as Fe}from"./filter-DPeCH_p5.js";import{S as Be}from"./search-JfXMCu6I.js";import{E as Oe,P as ke}from"./power-CDB48PmG.js";import{S as Ie}from"./square-pen-BzsyvcIC.js";import{C as Le}from"./copy-DLp_ORz7.js";import{T as Re}from"./trash-2-BpPlwinj.js";import"./chart-vendor-A7Ge_5Hb.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=oe("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Ue=["FILE","FTP","HTTP","IDOC","JDBC","IBMMQ","MAIL","ODATA","REST","RFC","SFTP","SOAP"],Ve=["INBOUND","OUTBOUND"];function ss(){const S=ce(),{isDevelopment:B}=de(),{toast:r}=he(),[A,p]=a.useState([]),[y,Q]=a.useState([]),[O,N]=a.useState([]),[J,k]=a.useState(!0),[h,W]=a.useState(""),[x,X]=a.useState("all"),[j,Z]=a.useState("all"),[f,G]=a.useState("all"),[K,g]=a.useState(!1),[C,T]=a.useState(null),[I,L]=a.useState(null);a.useEffect(()=>{u(),R()},[u,R]),a.useEffect(()=>{P()},[P]);const u=a.useCallback(async()=>{try{k(!0),n.info(i.SYSTEM,"Fetching adapters...");const s=await U.get("/adapters");n.info(i.SYSTEM,"Adapters response",{data:s}),s.success&&s.data?p(Array.isArray(s.data)?s.data:[]):(n.warn(i.SYSTEM,"No adapter data in response"),p([]))}catch(s){n.error(i.ERROR,"Error fetching adapters",{error:s}),r({title:"Error",description:"Failed to load communication adapters",variant:"destructive"}),p([])}finally{k(!1)}},[r]),R=a.useCallback(async()=>{try{n.info(i.SYSTEM,"Fetching business components...");const s=await U.get("/business-components");n.info(i.SYSTEM,"Business components response",{data:s}),s.success&&s.data?N(Array.isArray(s.data)?s.data:[]):N([])}catch(s){n.error(i.ERROR,"Error fetching business components",{error:s}),N([])}},[]),P=a.useCallback(()=>{let s=[...A];h&&(s=s.filter(t=>t.name.toLowerCase().includes(h.toLowerCase())||t.description?.toLowerCase().includes(h.toLowerCase()))),x!=="all"&&(s=s.filter(t=>t.businessComponentId===x)),j!=="all"&&(s=s.filter(t=>t.type===j)),f!=="all"&&(s=s.filter(t=>t.mode===f)),Q(s)},[A,h,x,j,f]),_=()=>{u(),r({title:"Success",description:"Adapters refreshed"})},ee=s=>{S("/create-communication-adapter",{state:{adapter:s,isEdit:!0,viewMode:!0}})},se=s=>{S("/create-communication-adapter",{state:{adapter:s,isEdit:!0}})},te=async s=>{try{const t=await w.cloneAdapter(s.id,`${s.name} (Copy)`);if(t.success)r({title:"Success",description:"Adapter cloned successfully"}),u();else throw new Error(t.error||"Failed to clone adapter")}catch(t){r({title:"Error",description:t instanceof Error?t.message:"Failed to clone adapter",variant:"destructive"})}},ae=async()=>{if(C)try{const s=await w.deleteAdapter(C.id);if(s.success)r({title:"Success",description:"Adapter deleted successfully"}),p(A.filter(t=>t.id!==C.id)),g(!1),T(null);else throw new Error(s.error||"Failed to delete adapter")}catch(s){r({title:"Error",description:s instanceof Error?s.message:"Failed to delete adapter",variant:"destructive"})}},re=async s=>{try{L(s.id);const t=await w.testAdapter(s.id,"{}");if(t.success&&t.data)r({title:"Success",description:t.data.message||"Connection test successful"});else throw new Error(t.error||"Connection test failed")}catch(t){r({title:"Error",description:t instanceof Error?t.message:"Failed to test adapter connection",variant:"destructive"})}finally{L(null)}},ne=async s=>{try{const t={active:!s.active},v=await w.updateAdapter(s.id,t);if(v.success)r({title:"Success",description:`Adapter ${s.active?"deactivated":"activated"} successfully`}),u();else throw new Error(v.error||"Failed to update adapter")}catch(t){r({title:"Error",description:t instanceof Error?t.message:"Failed to update adapter status",variant:"destructive"})}},ie=s=>e.jsx(F,{className:s?"bg-green-500":"bg-gray-500",children:s?"Active":"Inactive"}),le=s=>{const t={INBOUND:"bg-blue-500",OUTBOUND:"bg-purple-500"},v={INBOUND:"Inbound",OUTBOUND:"Outbound"};return e.jsx(F,{variant:"outline",className:`${t[s]||""}`,children:v[s]||s})};return e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Communication Adapters"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage and monitor all communication adapters"})]}),B&&e.jsxs(m,{onClick:()=>S("/create-communication-adapter"),children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Create Adapter"]})]}),e.jsxs(V,{children:[e.jsx(Y,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5"}),"Filters"]})}),e.jsx(q,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(ue,{placeholder:"Search by name...",value:h,onChange:s=>W(s.target.value),className:"pl-10"})]}),e.jsxs(D,{value:x,onValueChange:X,children:[e.jsx(b,{children:e.jsx(E,{placeholder:"All Business Components"})}),e.jsxs(M,{children:[e.jsx(o,{value:"all",children:"All Business Components"}),O.map(s=>e.jsx(o,{value:s.id,children:s.name},s.id))]})]}),e.jsxs(D,{value:j,onValueChange:Z,children:[e.jsx(b,{children:e.jsx(E,{placeholder:"All Types"})}),e.jsxs(M,{children:[e.jsx(o,{value:"all",children:"All Types"}),Ue.map(s=>e.jsx(o,{value:s,children:s},s))]})]}),e.jsxs(D,{value:f,onValueChange:G,children:[e.jsx(b,{children:e.jsx(E,{placeholder:"All Modes"})}),e.jsxs(M,{children:[e.jsx(o,{value:"all",children:"All Modes"}),Ve.map(s=>e.jsx(o,{value:s,children:s},s))]})]})]})})]}),e.jsxs(V,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-5 w-5"}),"Adapters (",y.length,")"]}),e.jsxs(m,{variant:"outline",size:"sm",onClick:_,children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})}),e.jsx(q,{children:J?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading adapters..."})}):y.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No adapters found"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ve,{children:[e.jsx(we,{children:e.jsxs(z,{children:[e.jsx(l,{children:"Name"}),e.jsx(l,{children:"Type"}),e.jsx(l,{children:"Mode"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Business Component"}),e.jsx(l,{children:"Created"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(Se,{children:y.map(s=>e.jsxs(z,{children:[e.jsx(c,{className:"font-medium",children:s.name}),e.jsx(c,{children:e.jsx(F,{variant:"outline",children:s.type})}),e.jsx(c,{children:le(s.mode)}),e.jsx(c,{children:ie(s.active)}),e.jsx(c,{children:O.find(t=>t.id===s.businessComponentId)?.name||"-"}),e.jsx(c,{children:new Date(s.createdAt).toLocaleDateString()}),e.jsx(c,{children:e.jsxs(xe,{children:[e.jsx(je,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"sm",children:e.jsx(Oe,{className:"h-4 w-4"})})}),e.jsxs(fe,{align:"end",children:[e.jsx(ge,{children:"Actions"}),e.jsx($,{}),e.jsx(d,{onClick:()=>ee(s),children:"View Details"}),B&&e.jsxs(e.Fragment,{children:[e.jsxs(d,{onClick:()=>se(s),children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(d,{onClick:()=>re(s),disabled:I===s.id,children:[I===s.id?e.jsx(Ce,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Ee,{className:"h-4 w-4 mr-2"}),"Test Connection"]}),e.jsx(d,{onClick:()=>ne(s),children:s.active?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Activate"]})}),e.jsxs(d,{onClick:()=>te(s),children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Clone"]}),e.jsx($,{}),e.jsxs(d,{onClick:()=>{T(s),g(!0)},className:"text-red-600",children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})})]},s.id))})]})})})]}),e.jsx(Ae,{open:K,onOpenChange:g,children:e.jsxs(ye,{children:[e.jsxs(Ne,{children:[e.jsx(Te,{children:"Delete Adapter"}),e.jsxs(De,{children:['Are you sure you want to delete "',C?.name,'"? This action cannot be undone.']})]}),e.jsxs(be,{children:[e.jsx(m,{variant:"outline",onClick:()=>{g(!1),T(null)},children:"Cancel"}),e.jsx(m,{variant:"destructive",onClick:ae,children:"Delete"})]})]})})]})}export{ss as default};
