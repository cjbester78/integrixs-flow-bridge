import{j as e}from"./ui-vendor-B4gDKxp2.js";import{u as te,r as a}from"./react-vendor-pDgKdaAw.js";import{w as ae,F as re,N as ne,l as o,L as d,a as D,J as le,v as j,o as R,p as B,q as F,r as M,I as ie,S as P,h as I,i as O,j as V,k as u,R as ce,B as w,Q as oe,V as de,W as ue,Z as b,Y as he,_ as me,$ as xe,a0 as ge,a1 as je,a2 as pe,a3 as fe,a4 as Ce,a5 as Se}from"./index-BgQC9CM8.js";import{u as ve,a as De,P as we}from"./useMetaDescription-CY_hupul.js";import{P as be}from"./PageHeader-CNgmBS31.js";import{T as Ne,a as ye,b as $,c as r,d as Te,e as n}from"./table-Mlgye53F.js";import{P as H}from"./plus-DX1aRrf7.js";import{F as Ee}from"./filter-DPeCH_p5.js";import{S as Ae}from"./search-JfXMCu6I.js";import{D as U}from"./database-N39ckc6O.js";import{E as Le}from"./ellipsis-BNyWp6NR.js";import{T as ke}from"./trash-2-BpPlwinj.js";import"./chart-vendor-A7Ge_5Hb.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=ae("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),We=()=>{ve("Data Structures"),De("Manage data structures for your integration flows. Define JSON, XML, XSD, WSDL, and custom formats for seamless data transformation in Integrix Flow Bridge.");const{toast:l}=re(),h=te(),{isDevelopment:p}=ne(),[N,f]=a.useState([]),[C,z]=a.useState([]),[Y,y]=a.useState([]),[J,T]=a.useState(!0),[i,W]=a.useState(""),[m,X]=a.useState("all"),[x,q]=a.useState("all"),[Q,S]=a.useState(!1),[v,E]=a.useState(null);a.useEffect(()=>{g(),A()},[g,A]),a.useEffect(()=>{L()},[L]);const g=a.useCallback(async()=>{try{T(!0),o.info(d.SYSTEM,"Fetching data structures...");const s=await D.get("/structures");if(o.info(d.SYSTEM,"Structures response",{data:s}),s.success&&s.data){const t=s.data.structures||s.data||[];f(Array.isArray(t)?t:[])}else f([])}catch(s){o.error(d.ERROR,"Error fetching structures",{error:s}),l({title:"Error",description:"Failed to fetch data structures",variant:"destructive"}),f([])}finally{T(!1)}},[l]),A=a.useCallback(async()=>{try{const s=await D.get("/business-components");s.success&&s.data&&y(Array.isArray(s.data)?s.data:[])}catch(s){o.error(d.ERROR,"Error fetching business components",{error:s}),y([])}},[]),L=a.useCallback(()=>{let s=[...N];i&&(s=s.filter(t=>t.name.toLowerCase().includes(i.toLowerCase())||t.description?.toLowerCase().includes(i.toLowerCase())||t.tags?.some(c=>c.toLowerCase().includes(i.toLowerCase())))),m!=="all"&&(s=s.filter(t=>t.businessComponentId===m)),x!=="all"&&(s=s.filter(t=>t.usage===x||t.usage==="both")),z(s)},[N,i,m,x]),Z=()=>{g(),l({title:"Success",description:"Data structures refreshed"})},k=s=>{h(`/data-structures/${s}`)},_=s=>{h(`/data-structures/${s.id}`,{state:{structure:s,isEdit:!0}})},G=s=>{E(s),S(!0)},K=async()=>{if(v)try{(await D.delete(`/structures/${v.id}`)).success?(l({title:"Success",description:"Data structure deleted successfully"}),g()):l({title:"Error",description:"Failed to delete data structure",variant:"destructive"})}catch(s){o.error(d.ERROR,"Error deleting structure",{error:s}),l({title:"Error",description:"Failed to delete data structure",variant:"destructive"})}finally{S(!1),E(null)}},ee=s=>{const t={json:"bg-green-500",xml:"bg-blue-500",xsd:"bg-purple-500",wsdl:"bg-orange-500",edmx:"bg-pink-500",custom:"bg-gray-500"};return e.jsx(w,{className:`${t[s]||"bg-gray-500"} text-white`,children:s.toUpperCase()})},se=s=>{const t={source:"bg-blue-500",target:"bg-purple-500",both:"bg-green-500"},c={source:"Source",target:"Target",both:"Source & Target"};return e.jsx(w,{variant:"outline",className:`${t[s]||""}`,children:c[s]||s})};return e.jsxs(we,{children:[e.jsx(be,{title:"Data Structures",description:"Manage and view all data structures",icon:e.jsx(le,{}),actions:p&&e.jsxs(j,{onClick:()=>h("/create-data-structure"),children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Create Structure"]})}),e.jsxs(R,{children:[e.jsx(B,{children:e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-5 w-5"}),"Filters"]})}),e.jsx(M,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ie,{placeholder:"Search by name or tags...",value:i,onChange:s=>W(s.target.value),className:"pl-10"})]}),e.jsxs(P,{value:m,onValueChange:X,children:[e.jsx(I,{children:e.jsx(O,{placeholder:"All Business Components"})}),e.jsxs(V,{children:[e.jsx(u,{value:"all",children:"All Business Components"}),Y.map(s=>e.jsx(u,{value:s.id,children:s.name},s.id))]})]}),e.jsxs(P,{value:x,onValueChange:q,children:[e.jsx(I,{children:e.jsx(O,{placeholder:"All Types"})}),e.jsxs(V,{children:[e.jsx(u,{value:"all",children:"All Types"}),e.jsx(u,{value:"source",children:"Source"}),e.jsx(u,{value:"target",children:"Target"})]})]})]})})]}),e.jsxs(R,{children:[e.jsx(B,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5"}),"Structures (",C.length,")"]}),e.jsxs(j,{variant:"outline",size:"sm",onClick:Z,children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})}),e.jsx(M,{children:J?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading data structures..."})}):C.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(U,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No data structures found"}),p&&e.jsxs(j,{variant:"outline",className:"mt-4",onClick:()=>h("/create-data-structure"),children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Create your first structure"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Ne,{children:[e.jsx(ye,{children:e.jsxs($,{children:[e.jsx(r,{children:"Name"}),e.jsx(r,{children:"Type"}),e.jsx(r,{children:"Usage"}),e.jsx(r,{children:"Business Component"}),e.jsx(r,{children:"Tags"}),e.jsx(r,{children:"Created"}),e.jsx(r,{children:"Actions"})]})}),e.jsx(Te,{children:C.map(s=>e.jsxs($,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>k(s.id),children:[e.jsx(n,{className:"font-medium",children:e.jsxs("div",{children:[e.jsx("p",{children:s.name}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]})}),e.jsx(n,{children:ee(s.type)}),e.jsx(n,{children:se(s.usage)}),e.jsx(n,{children:s.businessComponentName||"-"}),e.jsx(n,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:s.tags?.map((t,c)=>e.jsx(w,{variant:"secondary",className:"text-xs",children:t},c))})}),e.jsx(n,{children:new Date(s.createdAt).toLocaleDateString()}),e.jsx(n,{onClick:t=>t.stopPropagation(),children:e.jsxs(oe,{children:[e.jsx(de,{asChild:!0,children:e.jsx(j,{variant:"ghost",size:"sm",children:e.jsx(Le,{className:"h-4 w-4"})})}),e.jsxs(ue,{align:"end",children:[e.jsx(b,{onClick:()=>k(s.id),children:"View Details"}),p&&e.jsxs(e.Fragment,{children:[e.jsxs(b,{onClick:()=>_(s),children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsx(he,{}),e.jsxs(b,{onClick:()=>G(s),className:"text-destructive",children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})})]},s.id))})]})})})]}),e.jsx(me,{open:Q,onOpenChange:S,children:e.jsxs(xe,{children:[e.jsxs(ge,{children:[e.jsx(je,{children:"Delete Data Structure"}),e.jsxs(pe,{children:['Are you sure you want to delete "',v?.name,'"? This action cannot be undone.']})]}),e.jsxs(fe,{children:[e.jsx(Ce,{children:"Cancel"}),e.jsx(Se,{onClick:K,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})};export{We as DataStructures};
