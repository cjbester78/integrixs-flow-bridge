import{j as e}from"./ui-vendor-B4gDKxp2.js";import{r as v,u as _a}from"./react-vendor-pDgKdaAw.js";import{T as es,a as ss,b as Y,c as J}from"./tabs-C7kSaJO6.js";import{w as Te,o as U,p as q,q as V,U as Ae,r as R,J as ge,a as B,F as ce,g as C,I as M,S as G,h as ee,i as se,j as ae,k as L,v as S,m as na,l as P,L as E,z as Ss,s as re,G as ye,M as Le,R as oe,D as A,B as O,ab as ia,ac as ds,u as ps,y as js,T as gs,e as Me,A as la,d as oa,a7 as zs,a8 as ys,C as ca,H as da,c as le,ad as Ws,ae as Pa,a6 as Ea,af as Ns,b as Ta,a4 as ie,O as Ma,P as La,Q as Fa,W as Hs,X as Ua}from"./index-DseL_RUD.js";import{K as Re}from"./key-CmBpCcDY.js";import{F as ks,C as $s,P as qs,a as Vs,b as Ys,c as Ee,d as Ra,j as Oa}from"./jarFileService-BwE37xoI.js";import{T as Ve,a as Ye,b as pe,c as $,d as Je,e as W}from"./table-2esKEn88.js";import{E as Oe}from"./empty-state-BYDK_Gun.js";import{D as Ne,b as be,c as we,d as Ce,e as Be,f as as,a as Ba}from"./dialog-C8_RbV56.js";import{D as Fe}from"./database-BVjBpfEA.js";import{P as ts}from"./plus-BSv1nIAt.js";import{S as rs}from"./square-pen-o8_DZBzY.js";import{T as Ds}from"./trash-2-DvXNCKbG.js";import{U as ua}from"./upload-DCFlz6R9.js";import{b as Ka,T as za}from"./index-D9omWO5l.js";import{S as Qe}from"./scroll-area-Bq8hSKSu.js";import{N as As}from"./network-DwgVUhp_.js";import{i as X,s as us,a as te,d as je,b as ne,e as Is,c as Js,g as he,h as Ue,j as _s,k as ha,l as bs,m as Wa,n as Ha,o as ws,p as $a,q as qa,r as hs,t as Qs,u as Va,v as Ya,w as Ja,x as ma,y as xa,z as Ps,A as Es,B as Qa,C as Za,D as de,E as fa,F as Xa}from"./date-vendor-CjcKQu8N.js";import{C as Zs}from"./calendar-BMEwOPT2.js";import{D as Ga}from"./download-CW1087ur.js";import{F as et}from"./file-text-Dr8Aa4DA.js";import{F as st}from"./file-json-BQ29TB7B.js";import{F as at}from"./filter-BGthX1rd.js";import{S as va}from"./search-BXluZ4Nr.js";import{T as Ze}from"./textarea-CpMMCY-d.js";import{S as Xe}from"./switch-BYONlHIm.js";import{L as tt}from"./layers-CdVjnHt8.js";import{S as pa}from"./save-B_a1ZW5d.js";import{C as ja}from"./circle-check-CynnB-9z.js";import{E as rt}from"./external-link-CpCXtEq2.js";import{E as nt}from"./ellipsis-Bj9V3UWz.js";import{i as Ts}from"./api-response-utils-DzNCoCqu.js";import"./chart-vendor-A7Ge_5Hb.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=Te("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=Te("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=Te("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=Te("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=Te("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=Te("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]),ot=({users:s,roles:t,certificates:a,jarFiles:r})=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 animate-fade-in",children:[e.jsxs(U,{className:"hover-scale",children:[e.jsx(q,{className:"pb-2",children:e.jsxs(V,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Ae,{className:"h-4 w-4"}),"Total Users"]})}),e.jsxs(R,{children:[";",e.jsx("div",{className:"text-2xl font-bold",children:s.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active users"})]})]}),e.jsxs(U,{className:"hover-scale",children:[e.jsx(q,{className:"pb-2",children:e.jsxs(V,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4"}),"Roles"]})}),e.jsxs(R,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Defined roles"})]})]}),e.jsxs(U,{className:"hover-scale",children:[e.jsx(q,{className:"pb-2",children:e.jsxs(V,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Re,{className:"h-4 w-4"}),"Certificates"]})}),e.jsxs(R,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"SSL/Auth certs"})]})]}),e.jsxs(U,{className:"hover-scale",children:[e.jsx(q,{className:"pb-2",children:e.jsxs(V,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ks,{className:"h-4 w-4"}),"Connection Drivers"]})}),e.jsxs(R,{children:[e.jsx("div",{className:"text-2xl font-bold",children:r.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Driver files"})]})]})]});class ct{async getAllUsers(t=0,a=50){return B.get(`/users?page=${t}&limit=${a}`)}async getUserById(t){return B.get(`/users/${t}`)}async createUser(t){const a={...t,password:t.password||this.generateDefaultPassword()};return B.post("/auth/register",a)}async updateUser(t,a){return B.put(`/users/${t}`,a)}async deleteUser(t){return B.delete(`/users/${t}`)}async updateUserStatus(t,a){return B.patch(`/users/${t}/status`,{status:a})}async resetUserPassword(t){return B.post(`/users/${t}/reset-password`)}async assignRole(t,a,r={}){return B.patch(`/users/${t}/role`,{role:a,permissions:r})}async getUserPermissions(t){return B.get(`/users/${t}/permissions`)}async updateUserPermissions(t,a){return B.patch(`/users/${t}/permissions`,{permissions:a})}async searchUsers(t,a){const r=new URLSearchParams({q:t,...a?.role&&{role:a.role},...a?.status&&{status:a.status},page:(a?.page||1).toString(),limit:(a?.limit||50).toString()});return B.get(`/users/search?${r}`)}generateDefaultPassword(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let a="";for(let r=0;r<12;r++)a+=t.charAt(Math.floor(Math.random()*t.length));return a}getRolePermissions(t){return{administrator:{flows:["create","read","update","delete","execute"],adapters:["create","read","update","delete","test"],structures:["create","read","update","delete"],users:["create","read","update","delete"],system:["create","read","update","delete"],certificates:["create","read","update","delete"]},integrator:{flows:["create","read","update","execute"],adapters:["create","read","update","test"],structures:["create","read","update"],messages:["read"],channels:["read"]},viewer:{flows:["read"],adapters:["read"],structures:["read"],messages:["read"],channels:["read"]}}[t]||{flows:["read"]}}}const Pe=new ct,dt=({open:s,onOpenChange:t,onUserCreated:a})=>{const[r,n]=v.useState(!1),[l,o]=v.useState({username:"",email:"",firstName:"",lastName:"",role:"viewer",password:"",status:"active"}),{toast:c}=ce(),i=async h=>{h.preventDefault(),n(!0);try{P.info(E.UI,"Creating user with data",{data:l});const f=await Pe.createUser(l);f.success?(c({title:"User Created Successfully",description:`User ${l.username} has been created with role ${l.role}.`}),o({username:"",email:"",firstName:"",lastName:"",role:"viewer",password:"",status:"active"}),t(!1),a?.()):c({title:"Error Creating User",description:f.error||"An error occurred while creating the user.",variant:"destructive"})}catch(f){P.error(E.UI,"User creation error",{error:f}),c({title:"Error Creating User",description:f.message||"An unexpected error occurred.",variant:"destructive"})}finally{n(!1)}},u=h=>f=>{o(m=>({...m,[h]:f}))};return e.jsx(Ne,{open:s,onOpenChange:t,children:e.jsxs(be,{className:"sm:max-w-[425px]",children:[e.jsxs(we,{children:[e.jsx(Ce,{children:"Create New User"}),e.jsx(Be,{children:"Add a new user to the system. They will receive an email with login instructions."})]}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"firstName",children:"First Name"}),e.jsx(M,{id:"firstName",value:l.firstName,onChange:h=>u("firstName")(h.target.value),placeholder:"John",required:!0,disabled:r})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"lastName",children:"Last Name"}),e.jsx(M,{id:"lastName",value:l.lastName,onChange:h=>u("lastName")(h.target.value),placeholder:"Doe",required:!0,disabled:r})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"username",children:"Username"}),e.jsx(M,{id:"username",value:l.username,onChange:h=>u("username")(h.target.value),placeholder:"johndoe",required:!0,disabled:r})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"email",children:"Email"}),e.jsx(M,{id:"email",type:"email",value:l.email,onChange:h=>u("email")(h.target.value),placeholder:"john.doe@company.com",required:!0,disabled:r})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"password",children:"Temporary Password"}),e.jsx(M,{id:"password",type:"password",value:l.password,onChange:h=>u("password")(h.target.value),placeholder:"Leave empty for auto-generated password",disabled:r})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"role",children:"Role"}),e.jsxs(G,{value:l.role,onValueChange:u("role"),disabled:r,children:[e.jsx(ee,{children:e.jsx(se,{placeholder:"Select a role"})}),e.jsxs(ae,{children:[e.jsx(L,{value:"administrator",children:"Administrator"}),e.jsx(L,{value:"integrator",children:"Integrator"}),e.jsx(L,{value:"viewer",children:"Viewer"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"status",children:"Status"}),e.jsxs(G,{value:l.status,onValueChange:u("status"),disabled:r,children:[e.jsx(ee,{children:e.jsx(se,{placeholder:"Select status"})}),e.jsxs(ae,{children:[e.jsx(L,{value:"active",children:"Active"}),e.jsx(L,{value:"inactive",children:"Inactive"}),e.jsx(L,{value:"pending",children:"Pending"})]})]})]}),e.jsxs(as,{children:[e.jsx(S,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:r,children:"Cancel"}),e.jsxs(S,{type:"submit",disabled:r,children:[r&&e.jsx(na,{className:"h-4 w-4 mr-2 animate-spin"}),"Create User"]})]})]})]})})},ut=[{key:"flows",label:"Flows",icon:ye,permissions:["create","read","update","delete","execute"]},{key:"adapters",label:"Adapters",icon:Xs,permissions:["create","read","update","delete","test"]},{key:"structures",label:"Data Structures",icon:Fe,permissions:["create","read","update","delete"]},{key:"users",label:"User Management",icon:Ae,permissions:["create","read","update","delete"]},{key:"system",label:"System",icon:ge,permissions:["create","read","update","delete"]},{key:"messages",label:"Messages",icon:Le,permissions:["read"]},{key:"channels",label:"Channels",icon:Xs,permissions:["read"]},{key:"certificates",label:"Certificates",icon:ge,permissions:["create","read","update","delete"]}],ht=({open:s,onOpenChange:t,user:a,onUserUpdated:r})=>{const[n,l]=v.useState(!1),[o,c]=v.useState({}),[i,u]=v.useState({}),[h,f]=v.useState(!1),{toast:m}=ce();v.useEffect(()=>{if(a)if(c({email:a.email,firstName:a.first_name,lastName:a.last_name,role:a.role,status:a.status}),a.permissions&&Object.keys(a.permissions).length>0)u(a.permissions),f(!0);else{const N=Pe.getRolePermissions(a.role);u(N),f(!1)}},[a]);const p=async N=>{if(N.preventDefault(),!!a){l(!0);try{const x={...o,permissions:h?i:void 0};P.info(E.UI,"Updating user with data",{data:x});const g=await Pe.updateUser(a.id,x);g.success?(m({title:"User Updated Successfully",description:`User ${a.username} has been updated.`}),t(!1),r?.()):m({title:"Error Updating User",description:g.error||"An error occurred while updating the user.",variant:"destructive"})}catch(x){P.error(E.UI,"User update error",{error:x}),m({title:"Error Updating User",description:x.message||"An unexpected error occurred.",variant:"destructive"})}finally{l(!1)}}},d=N=>x=>{if(c(g=>({...g,[N]:x})),N==="role"){const g=Pe.getRolePermissions(x);h||u(g)}},j=(N,x)=>{u(g=>{const b=g[N]||[],T=b.includes(x);return{...g,[N]:T?b.filter(H=>H!==x):[...b,x]}})},y=()=>{if(o.role){const N=Pe.getRolePermissions(o.role);u(N),f(!1)}};return a?e.jsx(Ne,{open:s,onOpenChange:t,children:e.jsxs(be,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[e.jsxs(we,{children:[e.jsxs(Ce,{children:["Edit User: ",a.username]}),e.jsx(Be,{children:"Update user information and customize their permissions."})]}),e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"firstName",children:"First Name"}),e.jsx(M,{id:"firstName",value:o.firstName||"",onChange:N=>d("firstName")(N.target.value),disabled:n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"lastName",children:"Last Name"}),e.jsx(M,{id:"lastName",value:o.lastName||"",onChange:N=>d("lastName")(N.target.value),disabled:n})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"email",children:"Email"}),e.jsx(M,{id:"email",type:"email",value:o.email||"",onChange:N=>d("email")(N.target.value),disabled:n})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"role",children:"Role"}),e.jsxs(G,{value:o.role||"",onValueChange:d("role"),disabled:n,children:[e.jsx(ee,{children:e.jsx(se,{placeholder:"Select a role"})}),e.jsxs(ae,{children:[e.jsx(L,{value:"administrator",children:"Administrator"}),e.jsx(L,{value:"integrator",children:"Integrator"}),e.jsx(L,{value:"viewer",children:"Viewer"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"status",children:"Status"}),e.jsxs(G,{value:o.status||"",onValueChange:d("status"),disabled:n,children:[e.jsx(ee,{children:e.jsx(se,{placeholder:"Select status"})}),e.jsxs(ae,{children:[e.jsx(L,{value:"active",children:"Active"}),e.jsx(L,{value:"inactive",children:"Inactive"}),e.jsx(L,{value:"pending",children:"Pending"})]})]})]})]})]}),e.jsx(Ss,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Permissions"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($s,{id:"useCustomPermissions",checked:h,onCheckedChange:N=>f(N===!0),disabled:n}),e.jsx(C,{htmlFor:"useCustomPermissions",className:"text-sm",children:"Use custom permissions"})]}),h&&e.jsx(S,{type:"button",variant:"outline",size:"sm",onClick:y,disabled:n,children:"Reset to Role Defaults"})]})]}),e.jsxs(U,{children:[e.jsx(q,{children:e.jsx(re,{children:h?"Customize individual permissions for this user":`Using default permissions for ${o.role||"selected"} role`})}),e.jsx(R,{children:e.jsx("div",{className:"grid gap-4",children:ut.map(N=>{const x=i[N.key]||[],g=N.icon;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(C,{className:"font-medium",children:N.label})]}),e.jsx("div",{className:"flex flex-wrap gap-4 pl-6",children:N.permissions.map(b=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($s,{id:`${N.key}-${b}`,checked:x.includes(b),onCheckedChange:()=>j(N.key,b),disabled:n||!h}),e.jsx(C,{htmlFor:`${N.key}-${b}`,className:"text-sm capitalize",children:b})]},b))})]},N.key)})})})]})]}),e.jsxs(as,{children:[e.jsx(S,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:n,children:"Cancel"}),e.jsxs(S,{type:"submit",disabled:n,children:[n&&e.jsx(na,{className:"h-4 w-4 mr-2 animate-spin"}),"Update User"]})]})]})]})}):null},mt=({users:s,isLoading:t=!1,onRefresh:a})=>{const[r,n]=v.useState(!1),[l,o]=v.useState(!1),[c,i]=v.useState(null),u=f=>{switch(f){case"administrator":return e.jsx(ia,{className:"h-4 w-4 text-warning"});case"integrator":return e.jsx(ye,{className:"h-4 w-4 text-info"});case"viewer":return e.jsx(Ke,{className:"h-4 w-4 text-muted-foreground"});default:return e.jsx(Ae,{className:"h-4 w-4"})}},h=f=>{switch(f){case"active":return"default";case"inactive":return"secondary";default:return"outline"}};return e.jsxs(U,{children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(V,{children:"User Management"}),e.jsx(re,{children:"Manage system users and their access levels"})]}),e.jsxs("div",{className:"flex gap-2",children:[a&&e.jsxs(S,{variant:"outline",onClick:a,disabled:t,children:[e.jsx(oe,{className:`h-4 w-4 mr-2 ${t?"animate-spin":""}`}),"Refresh"]}),e.jsxs(S,{className:"bg-gradient-primary",onClick:()=>n(!0),children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Add User"]})]})]})}),e.jsx(R,{children:t?e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((f,m)=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(A,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(A,{className:"h-4 w-[200px]"}),e.jsx(A,{className:"h-4 w-[150px]"})]}),e.jsx(A,{className:"h-8 w-20"}),e.jsx(A,{className:"h-8 w-8"})]},m))}):s.length===0?e.jsx(Oe,{icon:Ae,title:"No users found",description:"There are currently no users in the system. Create your first user to get started.",action:{label:"Add User",onClick:()=>n(!0)}}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(Ve,{children:[e.jsx(Ye,{children:e.jsxs(pe,{children:[e.jsx($,{children:"Username"}),e.jsx($,{children:"Email"}),e.jsx($,{children:"Role"}),e.jsx($,{children:"Status"}),e.jsx($,{children:"Last Login"}),e.jsx($,{children:"Actions"})]})}),e.jsx(Je,{children:s.map(f=>e.jsxs(pe,{children:[e.jsx(W,{className:"font-medium",children:f.username}),e.jsx(W,{children:f.email}),e.jsx(W,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[u(f.role),e.jsx("span",{className:"capitalize",children:f.role})]})}),e.jsx(W,{children:e.jsx(O,{variant:h(f.status),children:f.status})}),e.jsx(W,{className:"text-muted-foreground",children:f.last_login_at||"Never"}),e.jsx(W,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{variant:"ghost",size:"sm",onClick:()=>{i(f),o(!0)},children:e.jsx(rs,{className:"h-4 w-4"})}),e.jsx(S,{variant:"ghost",size:"sm",className:"text-destructive",children:e.jsx(Ds,{className:"h-4 w-4"})})]})})]},f.id))})]})})}),e.jsx(dt,{open:r,onOpenChange:n,onUserCreated:()=>{n(!1),a?.()}}),e.jsx(ht,{open:l,onOpenChange:o,user:c,onUserUpdated:()=>{o(!1),i(null),a?.()}})]})},xt=({roles:s,isLoading:t=!1,onRefresh:a})=>{const r=n=>{switch(n){case"administrator":return e.jsx(ia,{className:"h-4 w-4 text-warning"});case"integrator":return e.jsx(ye,{className:"h-4 w-4 text-info"});case"viewer":return e.jsx(Ke,{className:"h-4 w-4 text-muted-foreground"});default:return e.jsx(Ae,{className:"h-4 w-4"})}};return e.jsxs(U,{children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(V,{children:"Role Management"}),e.jsx(re,{children:"Define and manage user roles and permissions"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a&&e.jsx(S,{variant:"outline",size:"sm",onClick:a,disabled:t,children:e.jsx(oe,{className:`h-4 w-4 ${t?"animate-spin":""}`})}),e.jsxs(S,{className:"bg-gradient-primary",children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Add Role"]})]})]})}),e.jsx(R,{children:e.jsx("div",{className:"grid gap-4",children:t?Array.from({length:3}).map((n,l)=>e.jsxs(U,{className:"bg-gradient-secondary border-border/50",children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A,{className:"h-4 w-4 rounded-full"}),e.jsxs("div",{children:[e.jsx(A,{className:"h-5 w-32 mb-2"}),e.jsx(A,{className:"h-4 w-48"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-6 w-16"}),e.jsx(A,{className:"h-8 w-8"})]})]})}),e.jsx(R,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from({length:4}).map((o,c)=>e.jsx(A,{className:"h-6 w-20"},c))})})]},l)):s.length===0?e.jsx(Oe,{icon:ge,title:"No roles found",description:"Create roles to define user permissions and access levels for your integration platform.",action:{label:"Add Role",onClick:()=>{}}}):s.map(n=>e.jsxs(U,{className:"bg-gradient-secondary border-border/50",children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[r(n.name),e.jsxs("div",{children:[e.jsx(V,{className:"text-lg capitalize",children:n.name}),e.jsx(re,{children:n.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(O,{variant:"outline",children:[n.userCount," users"]}),e.jsx(S,{variant:"outline",size:"sm",children:e.jsx(rs,{className:"h-4 w-4"})})]})]})}),e.jsx(R,{children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"Permissions:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.permissions.map(l=>e.jsx(O,{variant:"secondary",className:"text-xs",children:l.replace("_"," ")},l))})]})})]},n.id))})})]})},ft=({certificates:s,isLoading:t=!1,onRefresh:a})=>{const r=n=>{switch(n){case"active":return"default";case"inactive":return"secondary";case"expiring":return"destructive";default:return"outline"}};return e.jsxs(U,{children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(V,{children:"Certificate Management"}),e.jsx(re,{children:"Manage SSL certificates and authentication keys"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a&&e.jsx(S,{variant:"outline",size:"sm",onClick:a,disabled:t,children:e.jsx(oe,{className:`h-4 w-4 ${t?"animate-spin":""}`})}),e.jsxs(S,{className:"bg-gradient-primary",children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Add Certificate"]})]})]})}),e.jsx(R,{children:t?e.jsx("div",{className:"rounded-md border",children:e.jsxs(Ve,{children:[e.jsx(Ye,{children:e.jsxs(pe,{children:[e.jsx($,{children:"Name"}),e.jsx($,{children:"Type"}),e.jsx($,{children:"Issuer"}),e.jsx($,{children:"Valid Period"}),e.jsx($,{children:"Status"}),e.jsx($,{children:"Usage"}),e.jsx($,{children:"Actions"})]})}),e.jsx(Je,{children:Array.from({length:3}).map((n,l)=>e.jsxs(pe,{children:[e.jsx(W,{children:e.jsx(A,{className:"h-4 w-32"})}),e.jsx(W,{children:e.jsx(A,{className:"h-4 w-24"})}),e.jsx(W,{children:e.jsx(A,{className:"h-4 w-28"})}),e.jsx(W,{children:e.jsx(A,{className:"h-4 w-40"})}),e.jsx(W,{children:e.jsx(A,{className:"h-6 w-16"})}),e.jsx(W,{children:e.jsx(A,{className:"h-4 w-36"})}),e.jsx(W,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(A,{className:"h-8 w-8"}),e.jsx(A,{className:"h-8 w-8"})]})})]},l))})]})}):s.length===0?e.jsx(Oe,{icon:Re,title:"No certificates found",description:"Upload and manage SSL certificates and authentication keys for secure connections.",action:{label:"Add Certificate",onClick:()=>{}}}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(Ve,{children:[e.jsx(Ye,{children:e.jsxs(pe,{children:[e.jsx($,{children:"Name"}),e.jsx($,{children:"Type"}),e.jsx($,{children:"Issuer"}),e.jsx($,{children:"Valid Period"}),e.jsx($,{children:"Status"}),e.jsx($,{children:"Usage"}),e.jsx($,{children:"Actions"})]})}),e.jsx(Je,{children:s.map(n=>e.jsxs(pe,{children:[e.jsx(W,{className:"font-medium",children:n.name}),e.jsx(W,{children:n.type}),e.jsx(W,{children:n.issuer}),e.jsxs(W,{className:"text-sm",children:[n.validFrom," to ",n.validTo]}),e.jsx(W,{children:e.jsx(O,{variant:r(n.status),children:n.status})}),e.jsx(W,{className:"text-muted-foreground text-sm",children:n.usage}),e.jsx(W,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{variant:"ghost",size:"sm",children:e.jsx(rs,{className:"h-4 w-4"})}),e.jsx(S,{variant:"ghost",size:"sm",className:"text-destructive",children:e.jsx(Ds,{className:"h-4 w-4"})})]})})]},n.id))})]})})})]})},vt=({open:s,onOpenChange:t,onDriverAdded:a})=>{const[r,n]=v.useState(null),[l,o]=v.useState(!1),[c,i]=v.useState({databaseType:"",name:"",version:""}),{toast:u}=ce(),h=[{value:"mariadb",label:"MariaDB"},{value:"oracle",label:"Oracle"},{value:"db2",label:"DB2"},{value:"sqlserver",label:"Microsoft SQL Server"},{value:"mysql",label:"MySQL"},{value:"postgresql",label:"PostgreSQL"}],f=d=>{const j=d.target.files?.[0];if(j){if(!j.name.endsWith(".jar")){u({title:"Invalid File Type",description:"Please select a valid JDBC driver file (.jar).",variant:"destructive"});return}n(j);const y=j.name.replace(".jar","");i(N=>({...N,name:y,version:N.version||"1.0.0"}))}},m=async()=>{if(!r||!c.databaseType){u({title:"Missing Information",description:"Please select a database type and driver file.",variant:"destructive"});return}o(!0);try{await new Promise(j=>setTimeout(j,2e3));const d={id:Date.now().toString(),name:c.name||r.name.replace(".jar",""),version:c.version||"1.0.0",description:`JDBC driver for ${h.find(j=>j.value===c.databaseType)?.label}`,file_name:r.name,size_bytes:r.size,upload_date:new Date().toISOString().split("T")[0],driver_type:"JDBC",is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};a(d),n(null),i({databaseType:"",name:"",version:""}),t(!1),u({title:"Upload Successful",description:`JDBC driver for ${h.find(j=>j.value===c.databaseType)?.label} has been uploaded.`})}catch{u({title:"Upload Failed",description:"Failed to upload JDBC driver. Please try again.",variant:"destructive"})}finally{o(!1)}},p=()=>{n(null),i({databaseType:"",name:"",version:""})};return e.jsx(Ne,{open:s,onOpenChange:d=>{t(d),d||p()},children:e.jsxs(be,{className:"sm:max-w-[425px]",children:[e.jsx(we,{children:e.jsx(Ce,{children:"Add JDBC Driver"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"database-type",children:"Database Type *"}),e.jsxs(G,{value:c.databaseType,onValueChange:d=>i(j=>({...j,databaseType:d})),children:[e.jsx(ee,{children:e.jsx(se,{placeholder:"Select database type"})}),e.jsx(ae,{children:h.map(d=>e.jsx(L,{value:d.value,children:d.label},d.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"jdbc-file",children:"JDBC Driver File *"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{id:"jdbc-file",type:"file",accept:".jar",onChange:f,className:"cursor-pointer"}),e.jsx(S,{variant:"outline",size:"sm",disabled:!0,children:"Browse..."})]}),r&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Selected: ",r.name," (",Math.round(r.size/1024)," KB);"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"driver-name",children:"Driver Name"}),e.jsx(M,{id:"driver-name",placeholder:"Auto-generated",value:c.name,onChange:d=>i(j=>({...j,name:d.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"driver-version",children:"Version"}),e.jsx(M,{id:"driver-version",placeholder:"1.0.0",value:c.version,onChange:d=>i(j=>({...j,version:d.target.value}))})]})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(S,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),e.jsxs(S,{onClick:m,disabled:l||!r||!c.databaseType,className:"bg-gradient-primary hover:opacity-90",children:[e.jsx(ua,{className:"h-4 w-4 mr-2"}),l?"Uploading...":"Upload Driver"]})]})]})})},pt=({open:s,onOpenChange:t,onDriverAdded:a})=>{const[r,n]=v.useState(null),[l,o]=v.useState(!1),[c,i]=v.useState({brokerType:"",name:"",version:""}),{toast:u}=ce(),h=[{value:"activemq",label:"ActiveMQ"},{value:"rabbitmq",label:"RabbitMQ"},{value:"artemis",label:"Apache Artemis"},{value:"ibmmq",label:"IBM MQ"},{value:"kafka",label:"Apache Kafka"},{value:"solace",label:"Solace"}],f=d=>{const j=d.target.files?.[0];if(j){if(!j.name.endsWith(".jar")){u({title:"Invalid File Type",description:"Please select a valid IBM MQ driver file (.jar).",variant:"destructive"});return}n(j);const y=j.name.replace(".jar","");i(N=>({...N,name:y,version:N.version||"1.0.0"}))}},m=async()=>{if(!r||!c.brokerType){u({title:"Missing Information",description:"Please select a broker type and driver file.",variant:"destructive"});return}o(!0);try{await new Promise(j=>setTimeout(j,2e3));const d={id:Date.now().toString(),name:c.name||r.name.replace(".jar",""),version:c.version||"1.0.0",description:`IBM MQ driver for ${h.find(j=>j.value===c.brokerType)?.label}`,file_name:r.name,size_bytes:r.size,upload_date:new Date().toISOString().split("T")[0],driver_type:"IBMMQ",is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};a(d),n(null),i({brokerType:"",name:"",version:""}),t(!1),u({title:"Upload Successful",description:`IBM MQ driver for ${h.find(j=>j.value===c.brokerType)?.label} has been uploaded.`})}catch{u({title:"Upload Failed",description:"Failed to upload IBM MQ driver. Please try again.",variant:"destructive"})}finally{o(!1)}},p=()=>{n(null),i({brokerType:"",name:"",version:""})};return e.jsx(Ne,{open:s,onOpenChange:d=>{t(d),d||p()},children:e.jsxs(be,{className:"sm:max-w-[425px]",children:[e.jsx(we,{children:e.jsx(Ce,{children:"Add IBM MQ Driver"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"broker-type",children:"Message Broker Type *"}),e.jsxs(G,{value:c.brokerType,onValueChange:d=>i(j=>({...j,brokerType:d})),children:[e.jsx(ee,{children:e.jsx(se,{placeholder:"Select broker type"})}),e.jsx(ae,{children:h.map(d=>e.jsx(L,{value:d.value,children:d.label},d.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"ibmmq-file",children:"IBM MQ Driver File *"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{id:"jms-file",type:"file",accept:".jar",onChange:f,className:"cursor-pointer"}),e.jsx(S,{variant:"outline",size:"sm",disabled:!0,children:"Browse..."})]}),r&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Selected: ",r.name," (",Math.round(r.size/1024)," KB"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"driver-name",children:"Driver Name"}),e.jsx(M,{id:"driver-name",placeholder:"Auto-generated",value:c.name,onChange:d=>i(j=>({...j,name:d.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"driver-version",children:"Version"}),e.jsx(M,{id:"driver-version",placeholder:"1.0.0",value:c.version,onChange:d=>i(j=>({...j,version:d.target.value}))})]})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(S,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),e.jsxs(S,{onClick:m,disabled:l||!r||!c.brokerType,className:"bg-gradient-primary hover:opacity-90",children:[e.jsx(ua,{className:"h-4 w-4 mr-2"}),l?"Uploading...":"Upload Driver"]})]})]})})},jt=({jarFiles:s,isLoading:t=!1,onRefresh:a,onJarFileAdded:r,onJarFileDeleted:n})=>{const[l,o]=v.useState(!1),[c,i]=v.useState(!1);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto",children:[e.jsxs(U,{className:"cursor-pointer transition-all duration-200 hover:shadow-lg hover:scale-105 border-2 hover:border-primary/20",onClick:()=>o(!0),children:[e.jsxs(q,{className:"text-center pb-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center mb-4",children:e.jsx(Fe,{className:"h-8 w-8 text-info dark:text-info"})}),e.jsx(V,{className:"text-xl",children:"JDBC Driver"}),e.jsx(re,{children:"Upload database connection drivers for MySQL, Oracle, PostgreSQL, and more"})]}),e.jsx(R,{className:"text-center pt-0",children:e.jsx(S,{variant:"outline",className:"w-full",children:"Upload JDBC Driver"})})]}),e.jsxs(U,{className:"cursor-pointer transition-all duration-200 hover:shadow-lg hover:scale-105 border-2 hover:border-primary/20",onClick:()=>i(!0),children:[e.jsxs(q,{className:"text-center pb-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mb-4",children:e.jsx(Le,{className:"h-8 w-8 text-success dark:text-success"})}),e.jsx(V,{className:"text-xl",children:"IBM MQ Driver"}),e.jsx(re,{children:"Upload IBM MQ drivers for WebSphere MQ and other IBM messaging solutions"})]}),e.jsx(R,{className:"text-center pt-0",children:e.jsx(S,{variant:"outline",className:"w-full",children:"Upload IBM MQ Driver"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Uploaded Connection Drivers"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.length," driver",s.length!==1?"s":""," uploaded"]}),a&&e.jsx(S,{variant:"outline",size:"sm",onClick:a,disabled:t,children:e.jsx(oe,{className:`h-4 w-4 ${t?"animate-spin":""}`})})]})]}),t?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:3}).map((u,h)=>e.jsxs(U,{children:[e.jsxs(q,{className:"pb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5 rounded"}),e.jsx(A,{className:"h-5 w-32"})]}),e.jsx(A,{className:"h-4 w-48 mt-1"})]}),e.jsxs(R,{className:"pt-0",children:[e.jsx("div",{className:"space-y-2",children:Array.from({length:3}).map((f,m)=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx(A,{className:"h-4 w-16"}),e.jsx(A,{className:"h-4 w-20"})]},m))}),e.jsx(A,{className:"h-8 w-full mt-3"})]})]},h))}):s.length===0?e.jsx(Oe,{icon:ks,title:"No connection drivers uploaded",description:"Upload JDBC database drivers or IBM MQ client libraries to enable connections to external systems."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(u=>e.jsxs(U,{children:[e.jsxs(q,{className:"pb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[u.driver_type==="JDBC"?e.jsx(Fe,{className:"h-5 w-5 text-info"}):e.jsx(Le,{className:"h-5 w-5 text-success"}),e.jsx(V,{className:"text-base",children:u.name})]}),e.jsx(re,{className:"text-xs",children:u.file_name})]}),e.jsxs(R,{className:"pt-0",children:[e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Version:"}),e.jsx("span",{children:u.version})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"}),e.jsx("span",{children:u.driver_type})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Size:"}),"`",e.jsx("span",{children:u.size_bytes?`${Math.round(u.size_bytes/1024)} KB`:"N/A"})]})]}),e.jsx(S,{variant:"outline",size:"sm",className:"w-full mt-3",onClick:()=>n(u.id),children:"Remove"})]})]},u.id))})]}),e.jsx(vt,{open:l,onOpenChange:o,onDriverAdded:r}),e.jsx(pt,{open:c,onOpenChange:i,onDriverAdded:r})]})},gt=({jarFiles:s,isLoading:t,onRefresh:a,onJarFileAdded:r,onJarFileDeleted:n})=>e.jsx(jt,{jarFiles:s,isLoading:t,onRefresh:a,onJarFileAdded:r,onJarFileDeleted:n}),Ms=(s={})=>{const[t,a]=v.useState([]),[r,n]=v.useState({adapters:[],channels:[],flows:[]}),[l,o]=v.useState(!1),[c,i]=v.useState(),u=async()=>{try{const m=await Ka.getAdapters();n({adapters:m.success?m.data?.adapters||[]:[],channels:[],flows:[]})}catch(m){P.error(E.BUSINESS_LOGIC,"Failed to fetch sources",{error:m})}},h=v.useCallback(async()=>{o(!0),i(void 0);try{const m=new URLSearchParams;s.source&&m.append("source",s.source),s.sourceId&&m.append("sourceId",s.sourceId),s.level&&m.append("level",s.level),s.search&&m.append("search",s.search),s.startDate&&m.append("startDate",s.startDate),s.endDate&&m.append("endDate",s.endDate),s.domainType&&m.append("domainType",s.domainType),s.domainReferenceId&&m.append("domainReferenceId",s.domainReferenceId);const p=`/logs/system${m.toString()?`?${m.toString()}`:""}`,d=await B.get(p);if(d.success&&d.data)a(d.data);else{const j=await ds.getFilteredLogs({source:s.source,sourceId:s.sourceId,level:s.level,search:s.search});a(j)}}catch{try{const p=await ds.getFilteredLogs({source:s.source,sourceId:s.sourceId,level:s.level,search:s.search});a(p)}catch(p){i(p instanceof Error?p.message:"Failed to fetch logs"),a([])}}finally{o(!1)}},[s.source,s.sourceId,s.level,s.search,s.startDate,s.endDate,s.domainType,s.domainReferenceId]),f=()=>{h()};return v.useEffect(()=>{u()},[]),v.useEffect(()=>{h()},[s.source,s.sourceId,s.level,s.search,s.startDate,s.endDate,h]),v.useEffect(()=>{if(s.autoRefresh){const m=setInterval(h,s.refreshInterval||3e4);return()=>clearInterval(m)}},[s.autoRefresh,s.refreshInterval,h]),v.useEffect(()=>ds.onLogUpdate(()=>{h()}),[h]),{logs:t,sources:r,loading:l,error:c,refetch:f}},Ie=s=>{const[t,a]=v.useState([]),[r,n]=v.useState(!1),[l,o]=v.useState(),{logs:c,loading:i,error:u}=Ms({domainType:s.domainType,domainReferenceId:s.referenceId,autoRefresh:s.includeSystemLogs?s.autoRefresh:!1,refreshInterval:s.refreshInterval}),h=v.useCallback(async()=>{n(!0),o(void 0);try{const m=new URLSearchParams;m.append("domainType",s.domainType),m.append("level","error"),s.referenceId&&m.append("domainReferenceId",s.referenceId);const p=`/logs/system?${m.toString()}`,d=await B.get(p);d.success&&d.data?a(d.data):(a([]),P.info(E.BUSINESS_LOGIC,`No domain errors found for ${s.domainType}`))}catch(m){a([]),o(`Failed to fetch domain errors for ${s.domainType}`),P.error(E.BUSINESS_LOGIC,"Error occurred",{error:{data:`Failed to fetch domain errors for ${s.domainType}`,extra:m}})}finally{n(!1)}},[s.domainType,s.referenceId]),f=()=>{h()};return v.useEffect(()=>{h()},[s.domainType,s.referenceId,h]),v.useEffect(()=>{if(s.autoRefresh){const m=setInterval(h,s.refreshInterval||3e4);return()=>clearInterval(m)}},[s.autoRefresh,s.refreshInterval,h]),{domainErrors:t||[],systemLogs:s.includeSystemLogs?c||[]:[],loading:r||(s.includeSystemLogs?i:!1),error:l||(s.includeSystemLogs?u:void 0),refetch:f}},yt=({logs:s,loading:t,error:a,selectedSource:r})=>{const[n,l]=v.useState(new Set),o=Array.isArray(s)?s:[],c=m=>{const p=new Set(n);p.has(m)?p.delete(m):p.add(m),l(p)},i=m=>{switch(m){case"error":return e.jsx(Me,{className:"h-4 w-4 text-destructive"});case"warn":return e.jsx(gs,{className:"h-4 w-4 text-warning"});case"info":return e.jsx(js,{className:"h-4 w-4 text-success"});default:return e.jsx(Gs,{className:"h-4 w-4 text-muted-foreground"})}},u=m=>{switch(m){case"error":return e.jsx(O,{variant:"destructive",children:"Error"});case"warn":return e.jsx(O,{variant:"secondary",className:"text-warning",children:"Warning"});case"info":return e.jsx(O,{variant:"outline",children:"Info"});case"debug":return e.jsx(O,{variant:"secondary",children:"Debug"});default:return e.jsx(O,{variant:"outline",children:m})}},h=(m,p)=>{const d=p||m;switch(m){case"adapter":return e.jsx(O,{variant:"default",children:d});case"channel":return e.jsx(O,{variant:"secondary",children:d});case"system":return e.jsx(O,{variant:"outline",children:"System"});case"flow":return e.jsxs(O,{variant:"default",children:["Flow: ",d]});case"api":return e.jsx(O,{variant:"destructive",children:"API"});default:return e.jsx(O,{variant:"outline",children:d})}},f=m=>new Date(m).toLocaleString();return t?e.jsx(U,{className:"bg-secondary border-border/50",children:e.jsx(R,{className:"p-8 text-center",children:e.jsx("div",{className:"animate-pulse",children:"Loading logs..."})})}):a?e.jsx(U,{className:"bg-secondary border-border/50",children:e.jsx(R,{className:"p-8 text-center",children:e.jsxs("div",{className:"text-destructive",children:["Error loading logs: ",a]})})}):s.length===0?e.jsx(U,{className:"bg-secondary border-border/50",children:e.jsx(R,{className:"p-8 text-center",children:e.jsx("div",{className:"text-muted-foreground",children:r?"No logs found for the selected filters":"No system logs available"})})}):e.jsxs(U,{className:"bg-secondary border-border/50",children:[e.jsx(q,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"h-5 w-5"}),"; System Logs (",o.length,")"]})}),e.jsx(R,{children:e.jsx(Qe,{className:"h-96",children:e.jsx("div",{className:"space-y-2",children:o.map(m=>e.jsxs("div",{className:"border border-border/50 rounded-lg p-3 bg-background/50",children:[e.jsx("div",{className:"flex items-start justify-between gap-3",children:e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[i(m.level),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u(m.level),h(m.source,m.sourceName),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(ps,{className:"h-3 w-3"}),f(m.timestamp)]})]}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:m.message}),m.details&&e.jsxs("div",{className:"mt-2",children:[e.jsx(S,{variant:"ghost",size:"sm",onClick:()=>c(m.id),className:"text-xs",children:n.has(m.id)?"Hide Details":"Show Details"}),n.has(m.id)&&e.jsx("div",{className:"mt-2 p-2 bg-muted/50 rounded text-xs",children:e.jsx("pre",{className:"whitespace-pre-wrap font-mono",children:typeof m.details=="string"?m.details:JSON.stringify(m.details,null,2)})})]})]})]})}),m!==s[s.length-1]&&e.jsx(Ss,{className:"mt-3"})]},m.id))})})})]})},ea={success:"text-success",error:"text-destructive",warning:"text-warning",info:"text-info",active:"text-primary",inactive:"text-muted-foreground",pending:"text-warning",processing:"text-info",debug:"text-muted-foreground",warn:"text-warning",critical:"text-destructive",default:"text-foreground",muted:"text-muted-foreground"},$e=s=>ea[s]||ea.default,_e=({domainType:s,domainErrors:t,systemLogs:a,loading:r,error:n,referenceId:l,referenceName:o})=>{const[c,i]=v.useState(new Set),[u,h]=v.useState(new Set),f=x=>{const g=new Set(c);g.has(x)?g.delete(x):g.add(x),i(g)},m=x=>{const g=new Set(u);g.has(x)?g.delete(x):g.add(x),h(g)},p=x=>{const b={UserManagement:da,FlowEngine:ga,AdapterManagement:As,DataStructures:Fe,ChannelManagement:ye,MessageProcessing:Le}[x];return e.jsx(b,{className:"h-4 w-4"})},d=x=>{const g={Create:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",Update:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",Delete:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",Test:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",Deploy:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"},b=Object.keys(g).find(H=>x.includes(H))||"default",T=g[b]||"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";return e.jsx(O,{variant:"secondary",className:T,children:x})},j=x=>{const g=x.toLowerCase(),b=$e(g==="error"?"error":g==="warn"?"warning":g==="info"?"info":"debug");switch(g){case"error":return e.jsx(ca,{className:`h-4 w-4 ${b}`});case"warn":return e.jsx(gs,{className:`h-4 w-4 ${b}`});case"info":return e.jsx(js,{className:`h-4 w-4 ${b}`});case"debug":return e.jsx(ye,{className:`h-4 w-4 ${b}`});default:return e.jsx(js,{className:`h-4 w-4 ${b}`})}},y=x=>new Date(x).toLocaleString(),N=x=>{try{const g=JSON.parse(x);return JSON.stringify(g,null,2)}catch{return x}};return r?e.jsx(U,{children:e.jsx(R,{className:"p-6",children:e.jsx("div",{className:"text-center text-muted-foreground",children:"Loading logs..."})})}):n?e.jsxs(la,{variant:"destructive",children:[e.jsx(gs,{className:"h-4 w-4"}),e.jsx(oa,{children:n})]}):e.jsxs(U,{children:[e.jsx(q,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[";",p(s),s," Logs",o&&e.jsx(O,{variant:"outline",children:o})]})}),e.jsx(R,{children:e.jsxs(es,{defaultValue:"errors",className:"w-full",children:[e.jsxs(ss,{className:"grid w-full grid-cols-2",children:[e.jsxs(Y,{value:"errors",children:["User-Friendly Errors (",t?.length||0,")"]}),e.jsxs(Y,{value:"system",children:["System Logs (",a?.length||0,")"]})]}),e.jsx(J,{value:"errors",children:e.jsx(Qe,{className:"h-[600px] w-full",children:!t||t.length===0?e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No domain errors found."}):e.jsx("div",{className:"space-y-4",children:t.map(x=>e.jsx(U,{className:"border-l-4 border-l-red-500",children:e.jsx(R,{className:"p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d(x.action),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[e.jsx(ps,{className:"h-3 w-3 inline mr-1"}),y(x.createdAt)]})]}),x.description&&e.jsx("p",{className:"text-sm font-medium",children:x.description}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(S,{variant:"ghost",size:"sm",onClick:()=>f(x.id),className:"h-6 px-2",children:[c.has(x.id)?e.jsx(zs,{className:"h-3 w-3"}):e.jsx(ys,{className:"h-3 w-3"}),"Show Details"]})}),c.has(x.id)&&e.jsxs("div",{className:"mt-3 space-y-3 border-t pt-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Request Payload:"}),e.jsx("pre",{className:"text-xs bg-muted p-2 rounded overflow-auto max-h-40",children:N(x.payload)})]}),x.systemLogId&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm mb-1",children:"System Log ID:"}),e.jsx(O,{variant:"outline",className:"text-xs",children:x.systemLogId})]})]})]})})})},x.id))})})}),e.jsx(J,{value:"system",children:e.jsx(Qe,{className:"h-[600px] w-full",children:!a||a.length===0?e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No system logs found."}):e.jsx("div",{className:"space-y-4",children:a.map(x=>e.jsx(U,{children:e.jsx(R,{className:"p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[j(x.level),e.jsx(O,{variant:x.level==="error"?"destructive":"secondary",children:(x.level||"info").toUpperCase()}),x.source&&e.jsx(O,{variant:"outline",children:x.source}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[e.jsx(ps,{className:"h-3 w-3 inline mr-1"}),y(x.timestamp)]})]}),e.jsx("p",{className:"text-sm font-medium",children:x.message}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(S,{variant:"ghost",size:"sm",onClick:()=>m(x.id),className:"h-6 px-2",children:[u.has(x.id)?e.jsx(zs,{className:"h-3 w-3"}):e.jsx(ys,{className:"h-3 w-3"}),"Show Details"]})}),u.has(x.id)&&e.jsxs("div",{className:"mt-3 space-y-3 border-t pt-3",children:[x.details&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Details:"}),e.jsx("pre",{className:"text-xs bg-muted p-2 rounded overflow-auto max-h-40",children:typeof x.details=="string"?x.details:JSON.stringify(x.details,null,2)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[x.sourceName&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Source Name:"}),e.jsx("p",{className:"text-muted-foreground",children:x.sourceName})]}),x.sourceId&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Source ID:"}),e.jsx("p",{className:"text-muted-foreground",children:x.sourceId})]})]})]})]})})})},x.id))})})})]})})]})};var I=function(){return I=Object.assign||function(t){for(var a,r=1,n=arguments.length;r<n;r++){a=arguments[r];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t},I.apply(this,arguments)};function Nt(s,t){var a={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&t.indexOf(r)<0&&(a[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(a[r[n]]=s[r[n]]);return a}function ya(s,t,a){for(var r=0,n=t.length,l;r<n;r++)(l||!(r in t))&&(l||(l=Array.prototype.slice.call(t,0,r)),l[r]=t[r]);return s.concat(l||Array.prototype.slice.call(t))}function ze(s){return s.mode==="multiple"}function We(s){return s.mode==="range"}function ns(s){return s.mode==="single"}var bt={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function wt(s,t){return de(s,"LLLL y",t)}function Ct(s,t){return de(s,"d",t)}function St(s,t){return de(s,"LLLL",t)}function kt(s){return"".concat(s)}function Dt(s,t){return de(s,"cccccc",t)}function At(s,t){return de(s,"yyyy",t)}var It=Object.freeze({__proto__:null,formatCaption:wt,formatDay:Ct,formatMonthCaption:St,formatWeekNumber:kt,formatWeekdayName:Dt,formatYearCaption:At}),_t=function(s,t,a){return de(s,"do MMMM (EEEE)",a)},Pt=function(){return"Month: "},Et=function(){return"Go to next month"},Tt=function(){return"Go to previous month"},Mt=function(s,t){return de(s,"cccc",t)},Lt=function(s){return"Week n. ".concat(s)},Ft=function(){return"Year: "},Ut=Object.freeze({__proto__:null,labelDay:_t,labelMonthDropdown:Pt,labelNext:Et,labelPrevious:Tt,labelWeekNumber:Lt,labelWeekday:Mt,labelYearDropdown:Ft});function Rt(){var s="buttons",t=bt,a=$a,r={},n={},l=1,o={},c=new Date;return{captionLayout:s,classNames:t,formatters:It,labels:Ut,locale:a,modifiersClassNames:r,modifiers:n,numberOfMonths:l,styles:o,today:c,mode:"default"}}function Ot(s){var t=s.fromYear,a=s.toYear,r=s.fromMonth,n=s.toMonth,l=s.fromDate,o=s.toDate;return r?l=ne(r):t&&(l=new Date(t,0,1)),n?o=Is(n):a&&(o=new Date(a,11,31)),{fromDate:l?Js(l):void 0,toDate:o?Js(o):void 0}}var Na=v.createContext(void 0);function Bt(s){var t,a=s.initialProps,r=Rt(),n=Ot(a),l=n.fromDate,o=n.toDate,c=(t=a.captionLayout)!==null&&t!==void 0?t:r.captionLayout;c!=="buttons"&&(!l||!o)&&(c="buttons");var i;(ns(a)||ze(a)||We(a))&&(i=a.onSelect);var u=I(I(I({},r),a),{captionLayout:c,classNames:I(I({},r.classNames),a.classNames),components:I({},a.components),formatters:I(I({},r.formatters),a.formatters),fromDate:l,labels:I(I({},r.labels),a.labels),mode:a.mode||r.mode,modifiers:I(I({},r.modifiers),a.modifiers),modifiersClassNames:I(I({},r.modifiersClassNames),a.modifiersClassNames),onSelect:i,styles:I(I({},r.styles),a.styles),toDate:o});return e.jsx(Na.Provider,{value:u,children:s.children})}function z(){var s=v.useContext(Na);if(!s)throw new Error("useDayPicker must be used within a DayPickerProvider.");return s}function ba(s){var t=z(),a=t.locale,r=t.classNames,n=t.styles,l=t.formatters.formatCaption;return e.jsx("div",{className:r.caption_label,style:n.caption_label,"aria-live":"polite",role:"presentation",id:s.id,children:l(s.displayMonth,{locale:a})})}function Kt(s){return e.jsx("svg",I({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},s,{children:e.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function wa(s){var t,a,r=s.onChange,n=s.value,l=s.children,o=s.caption,c=s.className,i=s.style,u=z(),h=(a=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&a!==void 0?a:Kt;return e.jsxs("div",{className:c,style:i,children:[e.jsx("span",{className:u.classNames.vhidden,children:s["aria-label"]}),e.jsx("select",{name:s.name,"aria-label":s["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:n,onChange:r,children:l}),e.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,e.jsx(h,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function zt(s){var t,a=z(),r=a.fromDate,n=a.toDate,l=a.styles,o=a.locale,c=a.formatters.formatMonthCaption,i=a.classNames,u=a.components,h=a.labels.labelMonthDropdown;if(!r)return e.jsx(e.Fragment,{});if(!n)return e.jsx(e.Fragment,{});var f=[];if(qa(r,n))for(var m=ne(r),p=r.getMonth();p<=n.getMonth();p++)f.push(hs(m,p));else for(var m=ne(new Date),p=0;p<=11;p++)f.push(hs(m,p));var d=function(y){var N=Number(y.target.value),x=hs(ne(s.displayMonth),N);s.onChange(x)},j=(t=u?.Dropdown)!==null&&t!==void 0?t:wa;return e.jsx(j,{name:"months","aria-label":h(),className:i.dropdown_month,style:l.dropdown_month,onChange:d,value:s.displayMonth.getMonth(),caption:c(s.displayMonth,{locale:o}),children:f.map(function(y){return e.jsx("option",{value:y.getMonth(),children:c(y,{locale:o})},y.getMonth())})})}function Wt(s){var t,a=s.displayMonth,r=z(),n=r.fromDate,l=r.toDate,o=r.locale,c=r.styles,i=r.classNames,u=r.components,h=r.formatters.formatYearCaption,f=r.labels.labelYearDropdown,m=[];if(!n)return e.jsx(e.Fragment,{});if(!l)return e.jsx(e.Fragment,{});for(var p=n.getFullYear(),d=l.getFullYear(),j=p;j<=d;j++)m.push(Qs(Va(new Date),j));var y=function(x){var g=Qs(ne(a),Number(x.target.value));s.onChange(g)},N=(t=u?.Dropdown)!==null&&t!==void 0?t:wa;return e.jsx(N,{name:"years","aria-label":f(),className:i.dropdown_year,style:c.dropdown_year,onChange:y,value:a.getFullYear(),caption:h(a,{locale:o}),children:m.map(function(x){return e.jsx("option",{value:x.getFullYear(),children:h(x,{locale:o})},x.getFullYear())})})}function Ht(s,t){var a=v.useState(s),r=a[0],n=a[1],l=t===void 0?r:t;return[l,n]}function $t(s){var t=s.month,a=s.defaultMonth,r=s.today,n=t||a||r||new Date,l=s.toDate,o=s.fromDate,c=s.numberOfMonths,i=c===void 0?1:c;if(l&&Ue(l,n)<0){var u=-1*(i-1);n=he(l,u)}return o&&Ue(n,o)<0&&(n=o),ne(n)}function qt(){var s=z(),t=$t(s),a=Ht(t,s.month),r=a[0],n=a[1],l=function(o){var c;if(!s.disableNavigation){var i=ne(o);n(i),(c=s.onMonthChange)===null||c===void 0||c.call(s,i)}};return[r,l]}function Vt(s,t){for(var a=t.reverseMonths,r=t.numberOfMonths,n=ne(s),l=ne(he(n,r)),o=Ue(l,n),c=[],i=0;i<o;i++){var u=he(n,i);c.push(u)}return a&&(c=c.reverse()),c}function Yt(s,t){if(!t.disableNavigation){var a=t.toDate,r=t.pagedNavigation,n=t.numberOfMonths,l=n===void 0?1:n,o=r?l:1,c=ne(s);if(!a)return he(c,o);var i=Ue(a,s);if(!(i<l))return he(c,o)}}function Jt(s,t){if(!t.disableNavigation){var a=t.fromDate,r=t.pagedNavigation,n=t.numberOfMonths,l=n===void 0?1:n,o=r?l:1,c=ne(s);if(!a)return he(c,-o);var i=Ue(c,a);if(!(i<=0))return he(c,-o)}}var Ca=v.createContext(void 0);function Qt(s){var t=z(),a=qt(),r=a[0],n=a[1],l=Vt(r,t),o=Yt(r,t),c=Jt(r,t),i=function(f){return l.some(function(m){return _s(f,m)})},u=function(f,m){i(f)||(m&&ha(f,m)?n(he(f,1+t.numberOfMonths*-1)):n(f))},h={currentMonth:r,displayMonths:l,goToMonth:n,goToDate:u,previousMonth:c,nextMonth:o,isDateDisplayed:i};return e.jsx(Ca.Provider,{value:h,children:s.children})}function He(){var s=v.useContext(Ca);if(!s)throw new Error("useNavigation must be used within a NavigationProvider");return s}function sa(s){var t,a=z(),r=a.classNames,n=a.styles,l=a.components,o=He().goToMonth,c=function(h){o(he(h,s.displayIndex?-s.displayIndex:0))},i=(t=l?.CaptionLabel)!==null&&t!==void 0?t:ba,u=e.jsx(i,{id:s.id,displayMonth:s.displayMonth});return e.jsxs("div",{className:r.caption_dropdowns,style:n.caption_dropdowns,children:[e.jsx("div",{className:r.vhidden,children:u}),e.jsx(zt,{onChange:c,displayMonth:s.displayMonth}),e.jsx(Wt,{onChange:c,displayMonth:s.displayMonth})]})}function Zt(s){return e.jsx("svg",I({width:"16px",height:"16px",viewBox:"0 0 120 120"},s,{children:e.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Xt(s){return e.jsx("svg",I({width:"16px",height:"16px",viewBox:"0 0 120 120"},s,{children:e.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Ge=v.forwardRef(function(s,t){var a=z(),r=a.classNames,n=a.styles,l=[r.button_reset,r.button];s.className&&l.push(s.className);var o=l.join(" "),c=I(I({},n.button_reset),n.button);return s.style&&Object.assign(c,s.style),e.jsx("button",I({},s,{ref:t,type:"button",className:o,style:c}))});function Gt(s){var t,a,r=z(),n=r.dir,l=r.locale,o=r.classNames,c=r.styles,i=r.labels,u=i.labelPrevious,h=i.labelNext,f=r.components;if(!s.nextMonth&&!s.previousMonth)return e.jsx(e.Fragment,{});var m=u(s.previousMonth,{locale:l}),p=[o.nav_button,o.nav_button_previous].join(" "),d=h(s.nextMonth,{locale:l}),j=[o.nav_button,o.nav_button_next].join(" "),y=(t=f?.IconRight)!==null&&t!==void 0?t:Xt,N=(a=f?.IconLeft)!==null&&a!==void 0?a:Zt;return e.jsxs("div",{className:o.nav,style:c.nav,children:[!s.hidePrevious&&e.jsx(Ge,{name:"previous-month","aria-label":m,className:p,style:c.nav_button_previous,disabled:!s.previousMonth,onClick:s.onPreviousClick,children:n==="rtl"?e.jsx(y,{className:o.nav_icon,style:c.nav_icon}):e.jsx(N,{className:o.nav_icon,style:c.nav_icon})}),!s.hideNext&&e.jsx(Ge,{name:"next-month","aria-label":d,className:j,style:c.nav_button_next,disabled:!s.nextMonth,onClick:s.onNextClick,children:n==="rtl"?e.jsx(N,{className:o.nav_icon,style:c.nav_icon}):e.jsx(y,{className:o.nav_icon,style:c.nav_icon})})]})}function aa(s){var t=z().numberOfMonths,a=He(),r=a.previousMonth,n=a.nextMonth,l=a.goToMonth,o=a.displayMonths,c=o.findIndex(function(d){return _s(s.displayMonth,d)}),i=c===0,u=c===o.length-1,h=t>1&&(i||!u),f=t>1&&(u||!i),m=function(){r&&l(r)},p=function(){n&&l(n)};return e.jsx(Gt,{displayMonth:s.displayMonth,hideNext:h,hidePrevious:f,nextMonth:n,previousMonth:r,onPreviousClick:m,onNextClick:p})}function er(s){var t,a=z(),r=a.classNames,n=a.disableNavigation,l=a.styles,o=a.captionLayout,c=a.components,i=(t=c?.CaptionLabel)!==null&&t!==void 0?t:ba,u;return n?u=e.jsx(i,{id:s.id,displayMonth:s.displayMonth}):o==="dropdown"?u=e.jsx(sa,{displayMonth:s.displayMonth,id:s.id}):o==="dropdown-buttons"?u=e.jsxs(e.Fragment,{children:[e.jsx(sa,{displayMonth:s.displayMonth,displayIndex:s.displayIndex,id:s.id}),e.jsx(aa,{displayMonth:s.displayMonth,displayIndex:s.displayIndex,id:s.id})]}):u=e.jsxs(e.Fragment,{children:[e.jsx(i,{id:s.id,displayMonth:s.displayMonth,displayIndex:s.displayIndex}),e.jsx(aa,{displayMonth:s.displayMonth,id:s.id})]}),e.jsx("div",{className:r.caption,style:l.caption,children:u})}function sr(s){var t=z(),a=t.footer,r=t.styles,n=t.classNames.tfoot;return a?e.jsx("tfoot",{className:n,style:r.tfoot,children:e.jsx("tr",{children:e.jsx("td",{colSpan:8,children:a})})}):e.jsx(e.Fragment,{})}function ar(s,t,a){for(var r=a?Ps(new Date):Es(new Date,{locale:s,weekStartsOn:t}),n=[],l=0;l<7;l++){var o=te(r,l);n.push(o)}return n}function tr(){var s=z(),t=s.classNames,a=s.styles,r=s.showWeekNumber,n=s.locale,l=s.weekStartsOn,o=s.ISOWeek,c=s.formatters.formatWeekdayName,i=s.labels.labelWeekday,u=ar(n,l,o);return e.jsxs("tr",{style:a.head_row,className:t.head_row,children:[r&&e.jsx("td",{style:a.head_cell,className:t.head_cell}),u.map(function(h,f){return e.jsx("th",{scope:"col",className:t.head_cell,style:a.head_cell,"aria-label":i(h,{locale:n}),children:c(h,{locale:n})},f)})]})}function rr(){var s,t=z(),a=t.classNames,r=t.styles,n=t.components,l=(s=n?.HeadRow)!==null&&s!==void 0?s:tr;return e.jsx("thead",{style:r.head,className:a.head,children:e.jsx(l,{})})}function nr(s){var t=z(),a=t.locale,r=t.formatters.formatDay;return e.jsx(e.Fragment,{children:r(s.date,{locale:a})})}var Ls=v.createContext(void 0);function ir(s){if(!ze(s.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return e.jsx(Ls.Provider,{value:t,children:s.children})}return e.jsx(lr,{initialProps:s.initialProps,children:s.children})}function lr(s){var t=s.initialProps,a=s.children,r=t.selected,n=t.min,l=t.max,o=function(u,h,f){var m,p;(m=t.onDayClick)===null||m===void 0||m.call(t,u,h,f);var d=!!(h.selected&&n&&r?.length===n);if(!d){var j=!!(!h.selected&&l&&r?.length===l);if(!j){var y=r?ya([],r):[];if(h.selected){var N=y.findIndex(function(x){return X(u,x)});y.splice(N,1)}else y.push(u);(p=t.onSelect)===null||p===void 0||p.call(t,y,u,h,f)}}},c={disabled:[]};r&&c.disabled.push(function(u){var h=l&&r.length>l-1,f=r.some(function(m){return X(m,u)});return!!(h&&!f)});var i={selected:r,onDayClick:o,modifiers:c};return e.jsx(Ls.Provider,{value:i,children:a})}function Fs(){var s=v.useContext(Ls);if(!s)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return s}function or(s,t){var a=t||{},r=a.from,n=a.to;return r&&n?X(n,s)&&X(r,s)?void 0:X(n,s)?{from:n,to:void 0}:X(r,s)?void 0:bs(r,s)?{from:s,to:n}:{from:r,to:s}:n?bs(s,n)?{from:n,to:s}:{from:s,to:n}:r?ha(s,r)?{from:s,to:r}:{from:r,to:s}:{from:s,to:void 0}}var Us=v.createContext(void 0);function cr(s){if(!We(s.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return e.jsx(Us.Provider,{value:t,children:s.children})}return e.jsx(dr,{initialProps:s.initialProps,children:s.children})}function dr(s){var t=s.initialProps,a=s.children,r=t.selected,n=r||{},l=n.from,o=n.to,c=t.min,i=t.max,u=function(p,d,j){var y,N;(y=t.onDayClick)===null||y===void 0||y.call(t,p,d,j);var x=or(p,r);(N=t.onSelect)===null||N===void 0||N.call(t,x,p,d,j)},h={range_start:[],range_end:[],range_middle:[],disabled:[]};if(l?(h.range_start=[l],o?(h.range_end=[o],X(l,o)||(h.range_middle=[{after:l,before:o}])):h.range_end=[l]):o&&(h.range_start=[o],h.range_end=[o]),c&&(l&&!o&&h.disabled.push({after:us(l,c-1),before:te(l,c-1)}),l&&o&&h.disabled.push({after:l,before:te(l,c-1)}),!l&&o&&h.disabled.push({after:us(o,c-1),before:te(o,c-1)})),i){if(l&&!o&&(h.disabled.push({before:te(l,-i+1)}),h.disabled.push({after:te(l,i-1)})),l&&o){var f=je(o,l)+1,m=i-f;h.disabled.push({before:us(l,m)}),h.disabled.push({after:te(o,m)})}!l&&o&&(h.disabled.push({before:te(o,-i+1)}),h.disabled.push({after:te(o,i-1)}))}return e.jsx(Us.Provider,{value:{selected:r,onDayClick:u,modifiers:h},children:a})}function Rs(){var s=v.useContext(Us);if(!s)throw new Error("useSelectRange must be used within a SelectRangeProvider");return s}function qe(s){return Array.isArray(s)?ya([],s):s!==void 0?[s]:[]}function ur(s){var t={};return Object.entries(s).forEach(function(a){var r=a[0],n=a[1];t[r]=qe(n)}),t}var ue;(function(s){s.Outside="outside",s.Disabled="disabled",s.Selected="selected",s.Hidden="hidden",s.Today="today",s.RangeStart="range_start",s.RangeEnd="range_end",s.RangeMiddle="range_middle"})(ue||(ue={}));var hr=ue.Selected,ve=ue.Disabled,mr=ue.Hidden,xr=ue.Today,ms=ue.RangeEnd,xs=ue.RangeMiddle,fs=ue.RangeStart,fr=ue.Outside;function vr(s,t,a){var r,n=(r={},r[hr]=qe(s.selected),r[ve]=qe(s.disabled),r[mr]=qe(s.hidden),r[xr]=[s.today],r[ms]=[],r[xs]=[],r[fs]=[],r[fr]=[],r);return s.fromDate&&n[ve].push({before:s.fromDate}),s.toDate&&n[ve].push({after:s.toDate}),ze(s)?n[ve]=n[ve].concat(t.modifiers[ve]):We(s)&&(n[ve]=n[ve].concat(a.modifiers[ve]),n[fs]=a.modifiers[fs],n[xs]=a.modifiers[xs],n[ms]=a.modifiers[ms]),n}var Sa=v.createContext(void 0);function pr(s){var t=z(),a=Fs(),r=Rs(),n=vr(t,a,r),l=ur(t.modifiers),o=I(I({},n),l);return e.jsx(Sa.Provider,{value:o,children:s.children})}function ka(){var s=v.useContext(Sa);if(!s)throw new Error("useModifiers must be used within a ModifiersProvider");return s}function jr(s){return!!(s&&typeof s=="object"&&"before"in s&&"after"in s)}function gr(s){return!!(s&&typeof s=="object"&&"from"in s)}function yr(s){return!!(s&&typeof s=="object"&&"after"in s)}function Nr(s){return!!(s&&typeof s=="object"&&"before"in s)}function br(s){return!!(s&&typeof s=="object"&&"dayOfWeek"in s)}function wr(s,t){var a,r=t.from,n=t.to;if(r&&n){var l=je(n,r)<0;l&&(a=[n,r],r=a[0],n=a[1]);var o=je(s,r)>=0&&je(n,s)>=0;return o}return n?X(n,s):r?X(r,s):!1}function Cr(s){return fa(s)}function Sr(s){return Array.isArray(s)&&s.every(fa)}function kr(s,t){return t.some(function(a){if(typeof a=="boolean")return a;if(Cr(a))return X(s,a);if(Sr(a))return a.includes(s);if(gr(a))return wr(s,a);if(br(a))return a.dayOfWeek.includes(s.getDay());if(jr(a)){var r=je(a.before,s),n=je(a.after,s),l=r>0,o=n<0,c=bs(a.before,a.after);return c?o&&l:l||o}return yr(a)?je(s,a.after)>0:Nr(a)?je(a.before,s)>0:typeof a=="function"?a(s):!1})}function Os(s,t,a){var r=Object.keys(t).reduce(function(l,o){var c=t[o];return kr(s,c)&&l.push(o),l},[]),n={};return r.forEach(function(l){return n[l]=!0}),a&&!_s(s,a)&&(n.outside=!0),n}function Dr(s,t){for(var a=ne(s[0]),r=Is(s[s.length-1]),n,l,o=a;o<=r;){var c=Os(o,t),i=!c.disabled&&!c.hidden;if(!i){o=te(o,1);continue}if(c.selected)return o;c.today&&!l&&(l=o),n||(n=o),o=te(o,1)}return l||n}var Ar=365;function Da(s,t){var a=t.moveBy,r=t.direction,n=t.context,l=t.modifiers,o=t.retry,c=o===void 0?{count:0,lastFocused:s}:o,i=n.weekStartsOn,u=n.fromDate,h=n.toDate,f=n.locale,m={day:te,week:ws,month:he,year:Xa,startOfWeek:function(y){return n.ISOWeek?Ps(y):Es(y,{locale:f,weekStartsOn:i})},endOfWeek:function(y){return n.ISOWeek?ma(y):xa(y,{locale:f,weekStartsOn:i})}},p=m[a](s,r==="after"?1:-1);r==="before"&&u?p=Ya([u,p]):r==="after"&&h&&(p=Ja([h,p]));var d=!0;if(l){var j=Os(p,l);d=!j.disabled&&!j.hidden}return d?p:c.count>Ar?c.lastFocused:Da(p,{moveBy:a,direction:r,context:n,modifiers:l,retry:I(I({},c),{count:c.count+1})})}var Aa=v.createContext(void 0);function Ir(s){var t=He(),a=ka(),r=v.useState(),n=r[0],l=r[1],o=v.useState(),c=o[0],i=o[1],u=Dr(t.displayMonths,a),h=n??(c&&t.isDateDisplayed(c))?c:u,f=function(){i(n),l(void 0)},m=function(y){l(y)},p=z(),d=function(y,N){if(n){var x=Da(n,{moveBy:y,direction:N,context:p,modifiers:a});X(n,x)||(t.goToDate(x,n),m(x))}},j={focusedDay:n,focusTarget:h,blur:f,focus:m,focusDayAfter:function(){return d("day","after")},focusDayBefore:function(){return d("day","before")},focusWeekAfter:function(){return d("week","after")},focusWeekBefore:function(){return d("week","before")},focusMonthBefore:function(){return d("month","before")},focusMonthAfter:function(){return d("month","after")},focusYearBefore:function(){return d("year","before")},focusYearAfter:function(){return d("year","after")},focusStartOfWeek:function(){return d("startOfWeek","before")},focusEndOfWeek:function(){return d("endOfWeek","after")}};return e.jsx(Aa.Provider,{value:j,children:s.children})}function Bs(){var s=v.useContext(Aa);if(!s)throw new Error("useFocusContext must be used within a FocusProvider");return s}function _r(s,t){var a=ka(),r=Os(s,a,t);return r}var Ks=v.createContext(void 0);function Pr(s){if(!ns(s.initialProps)){var t={selected:void 0};return e.jsx(Ks.Provider,{value:t,children:s.children})}return e.jsx(Er,{initialProps:s.initialProps,children:s.children})}function Er(s){var t=s.initialProps,a=s.children,r=function(l,o,c){var i,u,h;if((i=t.onDayClick)===null||i===void 0||i.call(t,l,o,c),o.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,l,o,c);return}(h=t.onSelect)===null||h===void 0||h.call(t,l,l,o,c)},n={selected:t.selected,onDayClick:r};return e.jsx(Ks.Provider,{value:n,children:a})}function Ia(){var s=v.useContext(Ks);if(!s)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return s}function Tr(s,t){var a=z(),r=Ia(),n=Fs(),l=Rs(),o=Bs(),c=o.focusDayAfter,i=o.focusDayBefore,u=o.focusWeekAfter,h=o.focusWeekBefore,f=o.blur,m=o.focus,p=o.focusMonthBefore,d=o.focusMonthAfter,j=o.focusYearBefore,y=o.focusYearAfter,N=o.focusStartOfWeek,x=o.focusEndOfWeek,g=function(_){var D,ls,os,cs;ns(a)?(D=r.onDayClick)===null||D===void 0||D.call(r,s,t,_):ze(a)?(ls=n.onDayClick)===null||ls===void 0||ls.call(n,s,t,_):We(a)?(os=l.onDayClick)===null||os===void 0||os.call(l,s,t,_):(cs=a.onDayClick)===null||cs===void 0||cs.call(a,s,t,_)},b=function(_){var D;m(s),(D=a.onDayFocus)===null||D===void 0||D.call(a,s,t,_)},T=function(_){var D;f(),(D=a.onDayBlur)===null||D===void 0||D.call(a,s,t,_)},H=function(_){var D;(D=a.onDayMouseEnter)===null||D===void 0||D.call(a,s,t,_)},w=function(_){var D;(D=a.onDayMouseLeave)===null||D===void 0||D.call(a,s,t,_)},Q=function(_){var D;(D=a.onDayPointerEnter)===null||D===void 0||D.call(a,s,t,_)},F=function(_){var D;(D=a.onDayPointerLeave)===null||D===void 0||D.call(a,s,t,_)},Se=function(_){var D;(D=a.onDayTouchCancel)===null||D===void 0||D.call(a,s,t,_)},ke=function(_){var D;(D=a.onDayTouchEnd)===null||D===void 0||D.call(a,s,t,_)},me=function(_){var D;(D=a.onDayTouchMove)===null||D===void 0||D.call(a,s,t,_)},xe=function(_){var D;(D=a.onDayTouchStart)===null||D===void 0||D.call(a,s,t,_)},k=function(_){var D;(D=a.onDayKeyUp)===null||D===void 0||D.call(a,s,t,_)},fe=function(_){var D;switch(_.key){case"ArrowLeft":_.preventDefault(),_.stopPropagation(),a.dir==="rtl"?c():i();break;case"ArrowRight":_.preventDefault(),_.stopPropagation(),a.dir==="rtl"?i():c();break;case"ArrowDown":_.preventDefault(),_.stopPropagation(),u();break;case"ArrowUp":_.preventDefault(),_.stopPropagation(),h();break;case"PageUp":_.preventDefault(),_.stopPropagation(),_.shiftKey?j():p();break;case"PageDown":_.preventDefault(),_.stopPropagation(),_.shiftKey?y():d();break;case"Home":_.preventDefault(),_.stopPropagation(),N();break;case"End":_.preventDefault(),_.stopPropagation(),x();break}(D=a.onDayKeyDown)===null||D===void 0||D.call(a,s,t,_)},is={onClick:g,onFocus:b,onBlur:T,onKeyDown:fe,onKeyUp:k,onMouseEnter:H,onMouseLeave:w,onPointerEnter:Q,onPointerLeave:F,onTouchCancel:Se,onTouchEnd:ke,onTouchMove:me,onTouchStart:xe};return is}function Mr(){var s=z(),t=Ia(),a=Fs(),r=Rs(),n=ns(s)?t.selected:ze(s)?a.selected:We(s)?r.selected:void 0;return n}function Lr(s){return Object.values(ue).includes(s)}function Fr(s,t){var a=[s.classNames.day];return Object.keys(t).forEach(function(r){var n=s.modifiersClassNames[r];if(n)a.push(n);else if(Lr(r)){var l=s.classNames["day_".concat(r)];l&&a.push(l)}}),a}function Ur(s,t){var a=I({},s.styles.day);return Object.keys(t).forEach(function(r){var n;a=I(I({},a),(n=s.modifiersStyles)===null||n===void 0?void 0:n[r])}),a}function Rr(s,t,a){var r,n,l,o=z(),c=Bs(),i=_r(s,t),u=Tr(s,i),h=Mr(),f=!!(o.onDayClick||o.mode!=="default");v.useEffect(function(){var H;i.outside||c.focusedDay&&f&&X(c.focusedDay,s)&&((H=a.current)===null||H===void 0||H.focus())},[c.focusedDay,s,a,f,i.outside]);var m=Fr(o,i).join(" "),p=Ur(o,i),d=!!(i.outside&&!o.showOutsideDays||i.hidden),j=(l=(n=o.components)===null||n===void 0?void 0:n.DayContent)!==null&&l!==void 0?l:nr,y=e.jsx(j,{date:s,displayMonth:t,activeModifiers:i}),N={style:p,className:m,children:y,role:"gridcell"},x=c.focusTarget&&X(c.focusTarget,s)&&!i.outside,g=c.focusedDay&&X(c.focusedDay,s),b=I(I(I({},N),(r={disabled:i.disabled,role:"gridcell"},r["aria-selected"]=i.selected,r.tabIndex=g||x?0:-1,r)),u),T={isButton:f,isHidden:d,activeModifiers:i,selectedDays:h,buttonProps:b,divProps:N};return T}function Or(s){var t=v.useRef(null),a=Rr(s.date,s.displayMonth,t);return a.isHidden?e.jsx("div",{role:"gridcell"}):a.isButton?e.jsx(Ge,I({name:"day",ref:t},a.buttonProps)):e.jsx("div",I({},a.divProps))}function Br(s){var t=s.number,a=s.dates,r=z(),n=r.onWeekNumberClick,l=r.styles,o=r.classNames,c=r.locale,i=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,h=u(Number(t),{locale:c});if(!n)return e.jsx("span",{className:o.weeknumber,style:l.weeknumber,children:h});var f=i(Number(t),{locale:c}),m=function(p){n(t,a,p)};return e.jsx(Ge,{name:"week-number","aria-label":f,className:o.weeknumber,style:l.weeknumber,onClick:m,children:h})}function Kr(s){var t,a,r=z(),n=r.styles,l=r.classNames,o=r.showWeekNumber,c=r.components,i=(t=c?.Day)!==null&&t!==void 0?t:Or,u=(a=c?.WeekNumber)!==null&&a!==void 0?a:Br,h;return o&&(h=e.jsx("td",{className:l.cell,style:n.cell,children:e.jsx(u,{number:s.weekNumber,dates:s.dates})})),e.jsxs("tr",{className:l.row,style:n.row,children:[h,s.dates.map(function(f){return e.jsx("td",{className:l.cell,style:n.cell,role:"presentation",children:e.jsx(i,{displayMonth:s.displayMonth,date:f})},Wa(f))})]})}function ta(s,t,a){for(var r=a?.ISOWeek?ma(t):xa(t,a),n=a?.ISOWeek?Ps(s):Es(s,a),l=je(r,n),o=[],c=0;c<=l;c++)o.push(te(n,c));var i=o.reduce(function(u,h){var f=a?.ISOWeek?Qa(h):Za(h,a),m=u.find(function(p){return p.weekNumber===f});return m?(m.dates.push(h),u):(u.push({weekNumber:f,dates:[h]}),u)},[]);return i}function zr(s,t){var a=ta(ne(s),Is(s),t);if(t?.useFixedWeeks){var r=Ha(s,t);if(r<6){var n=a[a.length-1],l=n.dates[n.dates.length-1],o=ws(l,6-r),c=ta(ws(l,1),o,t);a.push.apply(a,c)}}return a}function Wr(s){var t,a,r,n=z(),l=n.locale,o=n.classNames,c=n.styles,i=n.hideHead,u=n.fixedWeeks,h=n.components,f=n.weekStartsOn,m=n.firstWeekContainsDate,p=n.ISOWeek,d=zr(s.displayMonth,{useFixedWeeks:!!u,ISOWeek:p,locale:l,weekStartsOn:f,firstWeekContainsDate:m}),j=(t=h?.Head)!==null&&t!==void 0?t:rr,y=(a=h?.Row)!==null&&a!==void 0?a:Kr,N=(r=h?.Footer)!==null&&r!==void 0?r:sr;return e.jsxs("table",{id:s.id,className:o.table,style:c.table,role:"grid","aria-labelledby":s["aria-labelledby"],children:[!i&&e.jsx(j,{}),e.jsx("tbody",{className:o.tbody,style:c.tbody,children:d.map(function(x){return e.jsx(y,{displayMonth:s.displayMonth,dates:x.dates,weekNumber:x.weekNumber},x.weekNumber)})}),e.jsx(N,{displayMonth:s.displayMonth})]})}function Hr(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var $r=Hr()?v.useLayoutEffect:v.useEffect,vs=!1,qr=0;function ra(){return"react-day-picker-".concat(++qr)}function Vr(s){var t,a=s??(vs?ra():null),r=v.useState(a),n=r[0],l=r[1];return $r(function(){n===null&&l(ra())},[]),v.useEffect(function(){vs===!1&&(vs=!0)},[]),(t=s??n)!==null&&t!==void 0?t:void 0}function Yr(s){var t,a,r=z(),n=r.dir,l=r.classNames,o=r.styles,c=r.components,i=He().displayMonths,u=Vr(r.id?"".concat(r.id,"-").concat(s.displayIndex):void 0),h=r.id?"".concat(r.id,"-grid-").concat(s.displayIndex):void 0,f=[l.month],m=o.month,p=s.displayIndex===0,d=s.displayIndex===i.length-1,j=!p&&!d;n==="rtl"&&(t=[p,d],d=t[0],p=t[1]),p&&(f.push(l.caption_start),m=I(I({},m),o.caption_start)),d&&(f.push(l.caption_end),m=I(I({},m),o.caption_end)),j&&(f.push(l.caption_between),m=I(I({},m),o.caption_between));var y=(a=c?.Caption)!==null&&a!==void 0?a:er;return e.jsxs("div",{className:f.join(" "),style:m,children:[e.jsx(y,{id:u,displayMonth:s.displayMonth,displayIndex:s.displayIndex}),e.jsx(Wr,{id:h,"aria-labelledby":u,displayMonth:s.displayMonth})]},s.displayIndex)}function Jr(s){var t=z(),a=t.classNames,r=t.styles;return e.jsx("div",{className:a.months,style:r.months,children:s.children})}function Qr(s){var t,a,r=s.initialProps,n=z(),l=Bs(),o=He(),c=v.useState(!1),i=c[0],u=c[1];v.useEffect(function(){n.initialFocus&&l.focusTarget&&(i||(l.focus(l.focusTarget),u(!0)))},[n.initialFocus,i,l.focus,l.focusTarget,l]);var h=[n.classNames.root,n.className];n.numberOfMonths>1&&h.push(n.classNames.multiple_months),n.showWeekNumber&&h.push(n.classNames.with_weeknumber);var f=I(I({},n.styles.root),n.style),m=Object.keys(r).filter(function(d){return d.startsWith("data-")}).reduce(function(d,j){var y;return I(I({},d),(y={},y[j]=r[j],y))},{}),p=(a=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&a!==void 0?a:Jr;return e.jsx("div",I({className:h.join(" "),style:f,dir:n.dir,id:n.id,nonce:r.nonce,title:r.title,lang:r.lang},m,{children:e.jsx(p,{children:o.displayMonths.map(function(d,j){return e.jsx(Yr,{displayIndex:j,displayMonth:d},j)})})}))}function Zr(s){var t=s.children,a=Nt(s,["children"]);return e.jsx(Bt,{initialProps:a,children:e.jsx(Qt,{children:e.jsx(Pr,{initialProps:a,children:e.jsx(ir,{initialProps:a,children:e.jsx(cr,{initialProps:a,children:e.jsx(pr,{children:e.jsx(Ir,{children:t})})})})})})})}function Xr(s){return e.jsx(Zr,I({},s,{children:e.jsx(Qr,{initialProps:s})}))}function Cs({className:s,classNames:t,showOutsideDays:a=!0,...r}){return e.jsx(Xr,{showOutsideDays:a,className:le("p-3",s),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:le(Ws({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:le(Ws({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...n})=>e.jsx(Pa,{className:"h-4 w-4"}),IconRight:({...n})=>e.jsx(ys,{className:"h-4 w-4"})},...r})}Cs.displayName="Calendar";const Gr=({onFilterChange:s})=>{const[t,a]=v.useState(),[r,n]=v.useState(),l=()=>{s({dateRange:{start:t?.toISOString(),end:r?.toISOString()}})},o=()=>{a(void 0),n(void 0),s({dateRange:{}})},c=i=>{const u=new Date,h=new Date;h.setDate(u.getDate()-i),a(h),n(u),s({dateRange:{start:h.toISOString(),end:u.toISOString()}})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"text-sm font-medium",children:"Date Range:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{variant:"outline",size:"sm",onClick:()=>c(1),children:"Last 24h"}),e.jsx(S,{variant:"outline",size:"sm",onClick:()=>c(7),children:"Last 7d"}),e.jsx(S,{variant:"outline",size:"sm",onClick:()=>c(30),children:"Last 30d"}),(t||r)&&e.jsx(S,{variant:"ghost",size:"sm",onClick:o,children:e.jsx(Ea,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{className:"text-sm",children:"Start Date"}),e.jsxs(qs,{children:[e.jsx(Vs,{asChild:!0,children:e.jsxs(S,{variant:"outline",size:"sm",className:le("w-[200px] justify-start text-left font-normal",!t&&"text-muted-foreground"),children:[e.jsx(Zs,{className:"mr-2 h-4 w-4"}),t?de(t,"PPP"):"Pick start date"]})}),e.jsx(Ys,{className:"w-auto p-0",align:"start",children:e.jsx(Cs,{mode:"single",selected:t,onSelect:i=>{a(i),i&&r&&l()},initialFocus:!0,className:"p-3 pointer-events-auto"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{className:"text-sm",children:"End Date"}),e.jsxs(qs,{children:[e.jsx(Vs,{asChild:!0,children:e.jsxs(S,{variant:"outline",size:"sm",className:le("w-[200px] justify-start text-left font-normal",!r&&"text-muted-foreground"),children:[e.jsx(Zs,{className:"mr-2 h-4 w-4"}),r?de(r,"PPP"):"Pick end date"]})}),e.jsx(Ys,{className:"w-auto p-0",align:"start",children:e.jsx(Cs,{mode:"single",selected:r,onSelect:i=>{n(i),t&&i&&l()},initialFocus:!0,className:"p-3 pointer-events-auto"})})]})]})]})]})},en=({adapterId:s})=>{const[t,a]=v.useState(!1),[r,n]=v.useState("csv"),[l,o]=v.useState(!1),{logs:c}=Ms({sourceId:s}),{toast:i}=ce(),u=async()=>{if(!s){i({title:"No Adapter Selected",description:"Please select an adapter to export logs.",variant:"destructive"});return}o(!0);try{let h,f,m;if(r==="csv"){const y=["Timestamp","Level","Message","Details"],N=c.map(x=>[x.timestamp,x.level,`"${x.message.replace(/"/g,'""')}"`,x.details?`"${JSON.stringify(x.details).replace(/"/g,'""')}"`:""]);h=[y.join(","),...N.map(x=>x.join(","))].join(`
`),f=`adapter-logs-${s}-${new Date().toISOString().split("T")[0]}.csv`,m="text/csv"}else h=JSON.stringify(c,null,2),f=`adapter-logs-${s}-${new Date().toISOString().split("T")[0]}.json`,m="application/json";const p=new Blob([h],{type:m}),d=URL.createObjectURL(p),j=document.createElement("a");j.href=d,j.download=f,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(d),i({title:"Export Successful",description:`Logs exported as ${f}`}),a(!1)}catch{i({title:"Export Failed",description:"An error occurred while exporting logs.",variant:"destructive"})}finally{o(!1)}};return e.jsxs(Ne,{open:t,onOpenChange:a,children:[e.jsx(Ba,{asChild:!0,children:e.jsxs(S,{variant:"outline",size:"sm",className:"hover-scale",children:[e.jsx(Ga,{className:"h-4 w-4 mr-2"}),"Export"]})}),e.jsxs(be,{children:[e.jsx(we,{children:e.jsx(Ce,{children:"Export Adapter Logs"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Export Format"}),e.jsxs(G,{value:r,onValueChange:h=>n(h),children:[e.jsx(ee,{children:e.jsx(se,{})}),e.jsxs(ae,{children:[e.jsx(L,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:"h-4 w-4"}),"CSV Format"]})}),e.jsx(L,{value:"json",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4"}),"JSON Format"]})})]})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["This will export ",c.length," log entries from the currently selected adapter and filters."]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(S,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(S,{onClick:u,disabled:l||!s,children:l?"Exporting...":"Export"})]})]})]})]})},sn=()=>{const[s,t]=v.useState(""),[a,r]=v.useState(""),[n,l]=v.useState(""),[o,c]=v.useState(""),[i,u]=v.useState({}),[h,f]=v.useState("system"),{logs:m,loading:p,error:d,refetch:j,sources:y}=Ms({source:s||void 0,sourceId:a||void 0,level:n||void 0,search:o,startDate:i.start,endDate:i.end}),N=Ie({domainType:"UserManagement",includeSystemLogs:!1}),x=Ie({domainType:"FlowEngine",includeSystemLogs:!1}),g=Ie({domainType:"AdapterManagement",includeSystemLogs:!1}),b=Ie({domainType:"DataStructures",includeSystemLogs:!1}),T=Ie({domainType:"ChannelManagement",includeSystemLogs:!1}),H=Ie({domainType:"MessageProcessing",includeSystemLogs:!1}),w=()=>{j(),N.refetch(),x.refetch(),g.refetch(),b.refetch(),T.refetch(),H.refetch()},Q=F=>{l(F.level),u(F.dateRange)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-foreground flex items-center gap-3",children:[e.jsx(Ns,{className:"h-7 w-7"}),"System Logs"]}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor and analyze all system logs including errors, adapters, channels, and flows"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(en,{adapterId:a}),e.jsxs(S,{variant:"outline",size:"sm",onClick:w,className:"hover-scale",children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),e.jsxs(U,{className:"bg-gradient-secondary border-border/50",children:[e.jsx(q,{children:e.jsxs(V,{className:"text-lg flex items-center gap-2",children:[e.jsx(at,{className:"h-5 w-5"}),"Filters"]})}),e.jsxs(R,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Source Type"}),e.jsxs(G,{value:s,onValueChange:F=>t(F),children:[e.jsx(ee,{children:e.jsx(se,{placeholder:"All sources"})}),e.jsxs(ae,{children:[e.jsx(L,{value:"system",children:"System"}),e.jsx(L,{value:"adapter",children:"Adapters"}),e.jsx(L,{value:"channel",children:"Channels"}),e.jsx(L,{value:"flow",children:"Flows"}),e.jsx(L,{value:"api",children:"API"})]})]})]}),s&&s!=="system"&&s!=="api"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Specific Source"}),e.jsxs(G,{value:a,onValueChange:r,children:[e.jsx(ee,{children:e.jsx(se,{placeholder:`Select ${s}`})}),e.jsxs(ae,{children:[s==="adapter"&&y.adapters.map(F=>e.jsx(L,{value:F.id,children:F.name},F.id)),s==="channel"&&y.channels.map(F=>e.jsx(L,{value:F.id,children:F.name},F.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Log Level"}),e.jsxs(G,{value:n,onValueChange:F=>l(F),children:[e.jsx(ee,{children:e.jsx(se,{placeholder:"All levels"})}),e.jsxs(ae,{children:[e.jsx(L,{value:"debug",children:"Debug"}),e.jsx(L,{value:"info",children:"Info"}),e.jsx(L,{value:"warn",children:"Warning"}),e.jsx(L,{value:"error",children:"Error"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(M,{placeholder:"Search logs...",value:o,onChange:F=>c(F.target.value),className:"pl-10"})]})]})]}),e.jsx(Gr,{onFilterChange:Q})]})]}),m.length>0&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(U,{className:"bg-gradient-secondary border-border/50",children:e.jsx(R,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Logs"}),e.jsx("p",{className:"text-2xl font-bold",children:m.length})]}),e.jsx(O,{variant:"outline",children:"24h"})]})})}),e.jsx(U,{className:"bg-gradient-secondary border-border/50",children:e.jsx(R,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Errors"}),e.jsx("p",{className:"text-2xl font-bold text-destructive",children:m.filter(F=>F.level==="error").length})]}),e.jsx(O,{variant:"destructive",children:"Error"})]})})}),e.jsx(U,{className:"bg-gradient-secondary border-border/50",children:e.jsx(R,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Warnings"}),e.jsx("p",{className:"text-2xl font-bold text-warning",children:m.filter(F=>F.level==="warn").length})]}),e.jsx(O,{variant:"secondary",children:"Warning"})]})})}),e.jsx(U,{className:"bg-gradient-secondary border-border/50",children:e.jsx(R,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Info"}),e.jsx("p",{className:"text-2xl font-bold text-success",children:m.filter(F=>F.level==="info").length})]}),e.jsx(O,{variant:"outline",children:"Info"})]})})})]}),e.jsxs(es,{value:h,onValueChange:f,children:[e.jsxs(ss,{className:"grid w-full grid-cols-7",children:[e.jsxs(Y,{value:"system",className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"h-4 w-4"}),"System Logs"]}),e.jsxs(Y,{value:"user",className:"flex items-center gap-2",children:[e.jsx(da,{className:"h-4 w-4"}),"Users"]}),e.jsxs(Y,{value:"flow",className:"flex items-center gap-2",children:[e.jsx(ga,{className:"h-4 w-4"}),"Flows"]}),e.jsxs(Y,{value:"adapter",className:"flex items-center gap-2",children:[e.jsx(As,{className:"h-4 w-4"}),"Adapters"]}),e.jsxs(Y,{value:"structure",className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4"}),"Structures"]}),e.jsxs(Y,{value:"channel",className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4"}),"Channels"]}),e.jsxs(Y,{value:"message",className:"flex items-center gap-2",children:[e.jsx(Le,{className:"h-4 w-4"}),"Messages"]})]}),e.jsx(J,{value:"system",children:e.jsx(yt,{logs:m,loading:p,error:d,selectedSource:s})}),e.jsx(J,{value:"user",children:e.jsx(_e,{domainType:"UserManagement",domainErrors:N.domainErrors,systemLogs:N.systemLogs,loading:N.loading,error:N.error})}),e.jsx(J,{value:"flow",children:e.jsx(_e,{domainType:"FlowEngine",domainErrors:x.domainErrors,systemLogs:x.systemLogs,loading:x.loading,error:x.error})}),e.jsx(J,{value:"adapter",children:e.jsx(_e,{domainType:"AdapterManagement",domainErrors:g.domainErrors,systemLogs:g.systemLogs,loading:g.loading,error:g.error})}),e.jsx(J,{value:"structure",children:e.jsx(_e,{domainType:"DataStructures",domainErrors:b.domainErrors,systemLogs:b.systemLogs,loading:b.loading,error:b.error})}),e.jsx(J,{value:"channel",children:e.jsx(_e,{domainType:"ChannelManagement",domainErrors:T.domainErrors,systemLogs:T.systemLogs,loading:T.loading,error:T.error})}),e.jsx(J,{value:"message",children:e.jsx(_e,{domainType:"MessageProcessing",domainErrors:H.domainErrors,systemLogs:H.systemLogs,loading:H.loading,error:H.error})})]})]})},an=()=>{const[s,t]=v.useState([]),[a,r]=v.useState(!0);v.useState(!1),v.useState(null),ce(),v.useState({name:"",displayName:"",description:"",category:"FILE_TRANSFER",iconName:"network",isActive:!0,supportsInbound:!0,supportsOutbound:!0,configurationSchema:""}),v.useEffect(()=>{n()},[]);const n=async()=>{try{r(!0);const l=await fetch("/api/admin/adapter-types");if(l.ok){const o=await l.json();t(o||[])}else if(l.status===404)t([]);else throw new Error("Failed to fetch adapter types")}catch(l){P.info(E.UI,"API not available yet, starting with empty data",{data:l}),t([])}finally{r(!1)}}},tn=()=>{const{toast:s}=ce(),[t,a]=v.useState(null),[r,n]=v.useState(null),[l,o]=v.useState(!0),[c,i]=v.useState(!1),[u,h]=v.useState(!1),f=v.useCallback(async()=>{try{o(!0);const y=await B.get("/admin/system-configuration/environment");y.success&&y.data?(a(y.data),n(y.data),h(!1)):s({title:"Error",description:"Failed to load environment configuration",variant:"destructive"})}catch(y){P.error(E.UI,"Error fetching environment configuration",{error:y}),s({title:"Error",description:"Error loading environment configuration",variant:"destructive"})}finally{o(!1)}},[s]),m=async()=>{if(t)try{if(i(!0),!(await B.put("/admin/system-configuration/environment/type",{environmentType:t.environmentType})).success){s({title:"Error",description:"Failed to update environment type",variant:"destructive"});return}if(!(await B.put("/admin/system-configuration/environment/enforce-restrictions",{enforceRestrictions:t.enforceRestrictions})).success){s({title:"Error",description:"Failed to update enforce restrictions",variant:"destructive"});return}if(!(await B.put("/admin/system-configuration/environment/restriction-message",{restrictionMessage:t.restrictionMessage})).success){s({title:"Error",description:"Failed to update restriction message",variant:"destructive"});return}s({title:"Success",description:"Environment configuration saved successfully"}),n(t),h(!1),setTimeout(()=>{window.location.reload()},1500)}catch(y){P.error(E.UI,"Error saving environment configuration",{error:y}),s({title:"Error",description:"Error saving environment configuration",variant:"destructive"})}finally{i(!1)}},p=y=>{if(!t)return;const N={...t,...y};a(N);const x=JSON.stringify(N)!==JSON.stringify(r);h(x)},d=y=>{switch(y){case"DEVELOPMENT":return{color:"text-info",bgColor:"bg-blue-100",label:"Development"};case"QUALITY_ASSURANCE":return{color:"text-warning",bgColor:"bg-yellow-100",label:"Quality Assurance"};case"PRODUCTION":return{color:"text-destructive",bgColor:"bg-red-100",label:"Production"};default:return{color:"text-muted-foreground",bgColor:"bg-gray-100",label:"Unknown"}}};if(v.useEffect(()=>{f()},[f]),l)return e.jsx(U,{children:e.jsx(R,{className:"flex items-center justify-center h-64",children:e.jsx(oe,{className:"h-8 w-8 animate-spin"})})});if(!t)return e.jsx(U,{children:e.jsx(R,{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Me,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"Failed to load configuration"}),e.jsx(S,{variant:"outline",size:"sm",onClick:f,className:"mt-2",children:"Retry"})]})})});const j=d(t.environmentType);return e.jsxs(U,{children:[e.jsx(q,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-5 w-5"}),"Environment Configuration"]}),e.jsx(re,{children:"Configure the system environment type and restrictions"})]}),e.jsx(O,{className:`${j.bgColor} ${j.color}`,children:j.label})]})}),e.jsxs(R,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"environment-type",children:"Environment Type"}),e.jsxs(G,{value:t.environmentType,onValueChange:y=>p({environmentType:y}),children:[e.jsx(ee,{id:"environment-type",children:e.jsx(se,{})}),e.jsx(ae,{children:t.availableTypes.map(y=>{const N=d(y);return e.jsx(L,{value:y,children:e.jsx("span",{className:N.color,children:N.label})},y)})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Controls which features are available in the system"})]}),e.jsxs("div",{className:"flex items-center justify-between space-x-2",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(C,{htmlFor:"enforce-restrictions",children:"Enforce Restrictions"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"When enabled, environment restrictions will be applied"})]}),e.jsx(Xe,{id:"enforce-restrictions",checked:t.enforceRestrictions,onCheckedChange:y=>p({enforceRestrictions:y})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"restriction-message",children:"Restriction Message"}),e.jsx(M,{id:"restriction-message",value:t.restrictionMessage,onChange:y=>p({restrictionMessage:y.target.value}),placeholder:"Enter custom restriction message"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Message shown when users try to perform restricted actions. Use %s for environment name."})]}),e.jsxs(la,{children:[e.jsx(Me,{className:"h-4 w-4"}),e.jsx(Ta,{children:"Environment Restrictions"}),e.jsxs(oa,{className:"space-y-2 mt-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Development:"})," All features enabled"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Quality Assurance:"})," Limited to adapter configuration, import/export, and deployment"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Production:"})," Limited to adapter configuration, import/export, and deployment"]})]})]}),u&&e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Me,{className:"h-4 w-4"}),"You have unsaved changes"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{variant:"outline",size:"sm",onClick:()=>{a(r),h(!1)},children:"Cancel"}),e.jsx(S,{size:"sm",onClick:m,disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(pa,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]}),!u&&r&&JSON.stringify(t)===JSON.stringify(r)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-success",children:[e.jsx(ja,{className:"h-4 w-4"}),"Configuration saved successfully"]})]})]})},rn=()=>{const{toast:s}=ce(),t=_a(),[a,r]=v.useState([]),[n,l]=v.useState([]),[o,c]=v.useState("all"),[i,u]=v.useState(!0),[h,f]=v.useState(!1),[m,p]=v.useState({}),d=v.useCallback(async()=>{try{u(!0);const w=await ie.get("/system-settings");P.info(E.UI,"Fetched system settings",{data:w}),r(w);const Q=[...new Set(w.map(F=>F.category||"Uncategorized").filter(Boolean))];l(["all",...Q])}catch(w){P.error(E.UI,"Error fetching system settings",{error:w}),s({title:"Error",description:"Failed to load system settings",variant:"destructive"})}finally{u(!1)}},[s]),j=v.useCallback(async()=>{},[]),y=async()=>{try{await ie.post("/system-settings/initialize"),s({title:"Success",description:"Default settings initialized"}),d()}catch(w){P.error(E.UI,"Error initializing settings",{error:w}),s({title:"Error",description:"Error initializing settings",variant:"destructive"})}},N=async(w,Q)=>{try{f(!0);const F=a.find(me=>me.settingKey===w);if(!F)return;const Se={...F,settingValue:Q,updatedBy:"admin"},ke=await ie.put(`/system-settings/${w}`,Se);r(me=>me.map(xe=>xe.settingKey===w?ke:xe)),p(me=>{const xe={...me};return delete xe[w],xe}),s({title:"Success",description:`Setting "${w}" updated successfully`})}catch(F){P.error(E.UI,"Error saving setting",{error:F}),s({title:"Error",description:"Error saving setting",variant:"destructive"})}finally{f(!1)}},x=(w,Q)=>{p(F=>({...F,[w]:Q}))},g=w=>m[w.settingKey]??w.settingValue,b=w=>m[w.settingKey]!==void 0&&m[w.settingKey]!==w.settingValue,T=o==="all"?a:a.filter(w=>w.category===o);v.useEffect(()=>{d(),j()},[d,j]);const H=w=>e.jsxs(U,{className:"mb-4",children:[e.jsx(q,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(V,{className:"text-sm font-medium flex items-center gap-2",children:[w.settingKey,w.isReadonly&&e.jsx(O,{variant:"secondary",className:"text-xs",children:"Readonly"}),w.isEncrypted&&e.jsx(O,{variant:"outline",className:"text-xs",children:"Encrypted"}),b(w)&&e.jsx(O,{variant:"destructive",className:"text-xs",children:"Modified"})]}),e.jsx(re,{className:"text-xs",children:w.description})]}),e.jsx(O,{variant:"outline",className:"text-xs",children:w.category})]})}),e.jsx(R,{className:"pt-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(C,{htmlFor:`setting-${w.id}`,className:"text-xs",children:["Value (",w.dataType,")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{id:`setting-${w.id}`,value:g(w),onChange:Q=>x(w.settingKey,Q.target.value),disabled:w.isReadonly,type:w.dataType==="PASSWORD"?"password":w.dataType==="INTEGER"?"number":"text",className:"text-sm",placeholder:w.settingValue}),b(w)&&e.jsx(S,{size:"sm",onClick:()=>N(w.settingKey,m[w.settingKey]),disabled:h,className:"px-3",children:h?e.jsx(oe,{className:"h-3 w-3 animate-spin"}):e.jsx(pa,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Created: ",new Date(w.createdAt).toLocaleString()]}),e.jsxs("span",{children:["Updated: ",new Date(w.updatedAt).toLocaleString()]})]}),(w.createdBy||w.updatedBy)&&e.jsxs("div",{className:"flex justify-between",children:[w.createdBy&&e.jsxs("span",{children:["Created by: ",w.createdBy]}),w.updatedBy&&e.jsxs("span",{children:["Updated by: ",w.updatedBy]})]})]})]})})]},w.id);return i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(oe,{className:"h-8 w-8 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(ye,{className:"h-6 w-6"}),"System Settings"]}),e.jsx("p",{className:"text-muted-foreground",children:"Configure system-wide settings and parameters"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(S,{variant:"outline",size:"sm",onClick:d,disabled:i,children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsx(S,{variant:"outline",size:"sm",onClick:y,children:"Initialize Defaults"}),e.jsxs(S,{onClick:()=>t("/system-configuration"),className:"ml-2",children:[e.jsx(rt,{className:"h-4 w-4 mr-2"}),"Advanced Configuration"]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(tn,{})}),e.jsx(Ss,{className:"my-8"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"General System Settings"}),Object.keys(m).length>0&&e.jsx(U,{className:"border-yellow-200 bg-yellow-50 dark:border-yellow-800 dark:bg-yellow-950",children:e.jsxs(q,{className:"pb-3",children:[e.jsxs(V,{className:"text-sm flex items-center gap-2 text-warning dark:text-warning",children:[e.jsx(Me,{className:"h-4 w-4"}),"Unsaved Changes"]}),e.jsxs(re,{className:"text-warning dark:text-warning",children:["You have ",Object.keys(m).length," unsaved change(s). Click the save button next to each modified setting to save changes."]})]})}),e.jsxs(es,{value:o,onValueChange:c,children:[e.jsx(ss,{className:"grid w-full grid-cols-auto max-w-fit",children:n.map(w=>e.jsxs(Y,{value:w,className:"capitalize",children:[w==="all"?"All Settings":w||"Uncategorized",w!=="all"&&e.jsx(O,{variant:"secondary",className:"ml-2 text-xs",children:a.filter(Q=>Q.category===w).length})]},w))}),e.jsx(J,{value:o,className:"space-y-4",children:T.length===0?e.jsx(U,{children:e.jsx(R,{className:"flex items-center justify-center h-32",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ye,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"No settings found"}),e.jsx(S,{variant:"outline",size:"sm",onClick:y,className:"mt-2",children:"Initialize Default Settings"})]})})}):e.jsx("div",{className:"grid gap-4",children:T.map(H)})})]})]})]})};function nn({variant:s="card",count:t=1,className:a}){const r=()=>{switch(s){case"card":return e.jsxs("div",{className:le("rounded-lg border p-6 space-y-4",a),children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{className:"h-4 w-[250px]"}),e.jsx(A,{className:"h-4 w-[200px]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{className:"h-4 w-full"}),e.jsx(A,{className:"h-4 w-full"}),e.jsx(A,{className:"h-4 w-3/4"})]})]});case"table":return e.jsx("div",{className:le("space-y-4",a),children:e.jsxs("div",{className:"rounded-md border",children:[e.jsx("div",{className:"border-b px-6 py-4",children:e.jsx(A,{className:"h-4 w-[150px]"})}),e.jsx("div",{className:"p-0",children:[...Array(5)].map((n,l)=>e.jsxs("div",{className:"border-b px-6 py-4 flex items-center space-x-4",children:[e.jsx(A,{className:"h-4 w-[100px]"}),e.jsx(A,{className:"h-4 w-[200px]"}),e.jsx(A,{className:"h-4 w-[150px]"}),e.jsx(A,{className:"h-4 w-[80px] ml-auto"})]},l))})]})});case"list":return e.jsx("div",{className:le("space-y-3",a),children:[...Array(3)].map((n,l)=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 rounded-lg border",children:[e.jsx(A,{className:"h-12 w-12 rounded-full"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(A,{className:"h-4 w-[200px]"}),e.jsx(A,{className:"h-3 w-[150px]"})]}),e.jsx(A,{className:"h-8 w-20"})]},l))});case"text":return e.jsxs("div",{className:le("space-y-2",a),children:[e.jsx(A,{className:"h-4 w-full"}),e.jsx(A,{className:"h-4 w-full"}),e.jsx(A,{className:"h-4 w-3/4"})]});case"button":return e.jsx(A,{className:le("h-10 w-24",a)});default:return null}};return e.jsxs(e.Fragment,{children:[";",[...Array(t)].map((n,l)=>e.jsx("div",{children:r()},l))]})}function ln({columns:s,data:t,actions:a,keyField:r,loading:n=!1,searchable:l=!1,searchPlaceholder:o="Search...",emptyState:c,className:i,toolbar:u}){const[h,f]=v.useState(""),m=h?t.filter(p=>s.some(d=>{const j=d.cell?d.cell(p):p[d.key];return String(j).toLowerCase().includes(h.toLowerCase())})):t;return n?e.jsx(nn,{variant:"table"}):e.jsxs("div",{className:le("space-y-4",i),children:[(l||u)&&e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[l&&e.jsxs("div",{className:"relative max-w-sm",children:[e.jsx(va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(M,{placeholder:o,value:h,onChange:p=>f(p.target.value),className:"pl-9"})]}),u]}),e.jsx("div",{className:"rounded-md border overflow-x-auto",children:e.jsxs(Ve,{children:[e.jsx(Ye,{children:e.jsxs(pe,{children:[s.map(p=>e.jsx($,{className:p.className,children:p.header},p.key)),a&&a.length>0&&e.jsx($,{className:"w-[70px]",children:"Actions"})]})}),e.jsx(Je,{children:m.length===0?e.jsx(pe,{children:e.jsx(W,{colSpan:s.length+(a?1:0),className:"h-32 text-center",children:c?e.jsx(Oe,{icon:c.icon,title:c.title,description:c.description,action:c.action}):e.jsx("p",{className:"text-muted-foreground",children:"No data available"})})}):m.map(p=>e.jsxs(pe,{className:"hover:bg-muted/50 transition-colors",children:[s.map(d=>e.jsx(W,{className:d.className,children:d.cell?d.cell(p):p[d.key]},d.key)),a&&a.length>0&&e.jsx(W,{children:e.jsxs(Ma,{children:[e.jsx(La,{asChild:!0,children:e.jsx(S,{variant:"ghost",size:"icon",className:"h-8 w-8","aria-label":"More actions",children:e.jsx(nt,{className:"h-4 w-4"})})}),e.jsx(Fa,{align:"end",children:a.map((d,j)=>{if(d.show&&!d.show(p))return null;const y=j===a.length-1,N=d.variant==="destructive";return e.jsxs("div",{children:[N&&j>0&&e.jsx(Hs,{}),e.jsxs(Ua,{onClick:()=>d.onClick(p),className:le(N&&"text-destructive focus:text-destructive"),children:[d.icon&&e.jsx(d.icon,{className:"h-4 w-4 mr-2"}),d.label]}),N&&!y&&e.jsx(Hs,{})]},d.label)})})]})})]},String(p[r])))})]})})]})}const De={getAllAuthConfigs:async()=>{try{return(await ie.get("/external-auth")).data}catch(s){return P.error(E.API,"Failed to fetch auth configs",{error:s}),{success:!1,data:[],message:"Failed to fetch authentication configurations"}}},getAuthConfigById:async s=>{try{return(await ie.get(`/external-auth/${s}`)).data}catch(t){return P.error(E.API,"Failed to fetch auth config",{error:t}),{success:!1,data:null,message:"Failed to fetch authentication configuration"}}},createAuthConfig:async s=>{try{return(await ie.post("/external-auth",s)).data}catch(t){return P.error(E.API,"Failed to create auth config",{error:t}),{success:!1,data:null,message:"Failed to create authentication configuration"}}},updateAuthConfig:async(s,t)=>{try{return(await ie.put(`/external-auth/${s}`,t)).data}catch(a){return P.error(E.API,"Failed to update auth config",{error:a}),{success:!1,data:null,message:"Failed to update authentication configuration"}}},deleteAuthConfig:async s=>{try{return await ie.delete(`/external-auth/${s}`)}catch(t){return P.error(E.API,"Failed to delete auth config",{error:t}),{success:!1,message:"Failed to delete authentication configuration"}}},getAuthAttempts:async(s,t=50)=>{try{return(await ie.get(`/external-auth/${s}/attempts`,{params:{limit:t}})).data}catch(a){return P.error(E.API,"Failed to fetch auth attempts",{error:a}),{success:!1,data:[],message:"Failed to fetch authentication attempts"}}},testAuthConfig:async s=>{try{return await ie.post(`/external-auth/${s}/test`)}catch(t){return P.error(E.API,"Failed to test auth config",{error:t}),{success:!1,message:"Failed to test authentication configuration"}}},linkToFlow:async(s,t,a)=>{try{return await ie.post("/external-auth/link-flow",{authConfigId:s,flowId:t,adapterType:a})}catch(r){return P.error(E.API,"Failed to link auth config to flow",{error:r}),{success:!1,message:"Failed to link authentication to flow"}}},unlinkFromFlow:async(s,t)=>{try{return await ie.delete(`/external-auth/unlink-flow/${s}/${t}`)}catch(a){return P.error(E.API,"Failed to unlink auth config from flow",{error:a}),{success:!1,message:"Failed to unlink authentication from flow"}}}};var K=(s=>(s.BASIC="BASIC",s.OAUTH1="OAUTH1",s.OAUTH2="OAUTH2",s.API_KEY="API_KEY",s))(K||{}),Z=(s=>(s.AUTHORIZATION_CODE="AUTHORIZATION_CODE",s.CLIENT_CREDENTIALS="CLIENT_CREDENTIALS",s.PASSWORD="PASSWORD",s.REFRESH_TOKEN="REFRESH_TOKEN",s))(Z||{});function on({open:s,onOpenChange:t,onCreated:a}){const{toast:r}=ce(),[n,l]=v.useState(!1),[o,c]=v.useState(K.BASIC),[i,u]=v.useState({name:"",description:"",authType:K.BASIC,basicAuth:{username:"",password:"",confirmPassword:"",realm:""},oauth2:{clientId:"",clientSecret:"",grantType:Z.CLIENT_CREDENTIALS},apiKey:{apiKey:"",headerName:"X-API-Key",queryParamName:"",keyPrefix:"",rateLimitPerHour:void 0,allowedIps:[]}}),[h,f]=v.useState(""),m=async d=>{d.preventDefault(),l(!0);try{const j={name:i.name,description:i.description,authType:o};if(o===K.BASIC&&i.basicAuth){if(i.basicAuth.password!==i.basicAuth.confirmPassword){r({title:"Error",description:"Passwords do not match",variant:"destructive"}),l(!1);return}j.basicAuth={username:i.basicAuth.username,password:i.basicAuth.password,realm:i.basicAuth.realm}}else if(o===K.OAUTH2&&i.oauth2)j.oauth2=i.oauth2;else if(o===K.API_KEY&&i.apiKey){const N=h.split(`
`).map(x=>x.trim()).filter(x=>x.length>0);j.apiKey={...i.apiKey,allowedIps:N.length>0?N:void 0}}const y=await De.createAuthConfig(j);if(Ts(y))if(y.success)r({title:"Success",description:"Authentication configuration created successfully"}),a(),t(!1),p();else throw new Error(y.message||"Failed to create configuration");else r({title:"Success",description:"Authentication configuration created successfully"}),a(),t(!1),p()}catch(j){P.error(E.AUTH,"Error creating auth config",{error:j}),r({title:"Error",description:j instanceof Error?j.message:"Failed to create authentication configuration",variant:"destructive"})}finally{l(!1)}},p=()=>{c(K.BASIC),u({name:"",description:"",authType:K.BASIC,basicAuth:{username:"",password:"",confirmPassword:"",realm:""},oauth2:{clientId:"",clientSecret:"",grantType:Z.CLIENT_CREDENTIALS},apiKey:{apiKey:"",headerName:"X-API-Key",queryParamName:"",keyPrefix:"",rateLimitPerHour:void 0,allowedIps:[]}}),f("")};return e.jsx(Ne,{open:s,onOpenChange:t,children:e.jsx(be,{className:"max-w-2xl",children:e.jsxs("form",{onSubmit:m,children:[e.jsxs(we,{children:[e.jsx(Ce,{children:"Create External Authentication"}),e.jsx(Be,{children:"Configure external authentication for HTTP/S adapters"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"name",children:"Name"}),e.jsx(M,{id:"name",placeholder:"e.g., Production API Key",value:i.name,onChange:d=>u({...i,name:d.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"description",children:"Description"}),e.jsx(Ze,{id:"description",placeholder:"Optional description of this authentication configuration",value:i.description,onChange:d=>u({...i,description:d.target.value}),rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"authType",children:"Authentication Type"}),e.jsxs(G,{value:o,onValueChange:d=>c(d),children:[e.jsx(ee,{children:e.jsx(se,{})}),e.jsxs(ae,{children:[e.jsx(L,{value:K.BASIC,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"h-4 w-4"}),"Basic Authentication"]})}),e.jsx(L,{value:K.API_KEY,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"h-4 w-4"}),"API Key"]})}),e.jsx(L,{value:K.OAUTH2,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4"}),"OAuth 2.0"]})})]})]})]}),e.jsxs("div",{className:"pt-4",children:[o===K.BASIC&&i.basicAuth&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Basic Authentication Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"username",children:"Username"}),e.jsx(M,{id:"username",value:i.basicAuth.username,onChange:d=>u({...i,basicAuth:{...i.basicAuth,username:d.target.value}}),required:!0})]}),e.jsx(Ee,{name:"password",label:"Password",value:i.basicAuth.password,onValueChange:d=>u({...i,basicAuth:{...i.basicAuth,password:d}}),required:!0}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"realm",children:"Realm (Optional)"}),e.jsx(M,{id:"realm",placeholder:"Authentication realm",value:i.basicAuth.realm,onChange:d=>u({...i,basicAuth:{...i.basicAuth,realm:d.target.value}})})]})]}),o===K.OAUTH2&&i.oauth2&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-medium",children:"OAuth 2.0 Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"clientId",children:"Client ID"}),e.jsx(M,{id:"clientId",value:i.oauth2.clientId,onChange:d=>u({...i,oauth2:{...i.oauth2,clientId:d.target.value}}),required:!0})]}),e.jsx(Ee,{name:"clientSecret",label:"Client Secret",value:i.oauth2.clientSecret,onValueChange:d=>u({...i,oauth2:{...i.oauth2,clientSecret:d}}),showConfirmation:!1,required:!0}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"grantType",children:"Grant Type"}),e.jsxs(G,{value:i.oauth2.grantType,onValueChange:d=>u({...i,oauth2:{...i.oauth2,grantType:d}}),children:[e.jsx(ee,{children:e.jsx(se,{})}),e.jsxs(ae,{children:[e.jsx(L,{value:Z.CLIENT_CREDENTIALS,children:"Client Credentials"}),e.jsx(L,{value:Z.AUTHORIZATION_CODE,children:"Authorization Code"}),e.jsx(L,{value:Z.PASSWORD,children:"Password"}),e.jsx(L,{value:Z.REFRESH_TOKEN,children:"Refresh Token"})]})]})]}),i.oauth2.grantType===Z.AUTHORIZATION_CODE&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"authorizationUrl",children:"Authorization URL"}),e.jsx(M,{id:"authorizationUrl",type:"url",placeholder:"https://auth.example.com/authorize",value:i.oauth2.authorizationUrl||"",onChange:d=>u({...i,oauth2:{...i.oauth2,authorizationUrl:d.target.value}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"redirectUri",children:"Redirect URI"}),e.jsx(M,{id:"redirectUri",type:"url",placeholder:"https://your-app.com/callback",value:i.oauth2.redirectUri||"",onChange:d=>u({...i,oauth2:{...i.oauth2,redirectUri:d.target.value}})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"tokenUrl",children:"Token URL"}),e.jsx(M,{id:"tokenUrl",type:"url",placeholder:"https://auth.example.com/token",value:i.oauth2.tokenUrl||"",onChange:d=>u({...i,oauth2:{...i.oauth2,tokenUrl:d.target.value}}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"scope",children:"Scope (Optional)"}),e.jsx(M,{id:"scope",placeholder:"read write admin",value:i.oauth2.scope||"",onChange:d=>u({...i,oauth2:{...i.oauth2,scope:d.target.value}})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Xe,{id:"usePkce",checked:i.oauth2.usePkce||!1,onCheckedChange:d=>u({...i,oauth2:{...i.oauth2,usePkce:d}})}),e.jsx(C,{htmlFor:"usePkce",children:"Use PKCE (Proof Key for Code Exchange)"})]})]}),o===K.API_KEY&&i.apiKey&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-medium",children:"API Key Details"}),e.jsx(Ee,{name:"apiKey",label:"API Key",value:i.apiKey.apiKey,onValueChange:d=>u({...i,apiKey:{...i.apiKey,apiKey:d}}),showConfirmation:!1,required:!0}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"headerName",children:"Header Name"}),e.jsx(M,{id:"headerName",placeholder:"X-API-Key",value:i.apiKey.headerName,onChange:d=>u({...i,apiKey:{...i.apiKey,headerName:d.target.value}}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"keyPrefix",children:"Key Prefix (Optional)"}),e.jsx(M,{id:"keyPrefix",placeholder:"Bearer",value:i.apiKey.keyPrefix||"",onChange:d=>u({...i,apiKey:{...i.apiKey,keyPrefix:d.target.value}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"queryParamName",children:"Query Parameter Name (Optional)"}),e.jsx(M,{id:"queryParamName",placeholder:"api_key",value:i.apiKey.queryParamName||"",onChange:d=>u({...i,apiKey:{...i.apiKey,queryParamName:d.target.value}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"rateLimitPerHour",children:"Rate Limit per Hour (Optional)"}),e.jsx(M,{id:"rateLimitPerHour",type:"number",placeholder:"1000",value:i.apiKey.rateLimitPerHour||"",onChange:d=>u({...i,apiKey:{...i.apiKey,rateLimitPerHour:d.target.value?parseInt(d.target.value):void 0}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"allowedIps",children:"Allowed IPs (Optional)"}),e.jsx(Ze,{id:"allowedIps",placeholder:`One IP address per line
192.168.1.0/24
10.0.0.1`,value:h,onChange:d=>f(d.target.value),rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter IP addresses or CIDR ranges, one per line"})]})]})]})]}),e.jsxs(as,{children:[e.jsx(S,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:n,children:"Cancel"}),e.jsx(S,{type:"submit",disabled:n,children:n?"Creating...":"Create Configuration"})]})]})})})}function cn({config:s,open:t,onOpenChange:a,onUpdated:r}){const{toast:n}=ce(),[l,o]=v.useState(!1),[c,i]=v.useState({name:s.name,description:s.description,isActive:s.isActive}),[u,h]=v.useState({username:s.basicAuth?.username||"",password:"",realm:s.basicAuth?.realm||""}),[f,m]=v.useState({clientId:s.oauth2?.clientId||"",clientSecret:"",authorizationUrl:s.oauth2?.authorizationUrl||"",tokenUrl:s.oauth2?.tokenUrl||"",redirectUri:s.oauth2?.redirectUri||"",scope:s.oauth2?.scope||"",grantType:s.oauth2?.grantType||Z.CLIENT_CREDENTIALS,usePkce:s.oauth2?.usePkce||!1}),[p,d]=v.useState({apiKey:"",keyPrefix:s.apiKey?.keyPrefix||"",headerName:s.apiKey?.headerName||"X-API-Key",queryParamName:s.apiKey?.queryParamName||"",rateLimitPerHour:s.apiKey?.rateLimitPerHour,allowedIps:s.apiKey?.allowedIps||[]}),[j,y]=v.useState(s.apiKey?.allowedIps?.join(`
`)||"");v.useEffect(()=>{i({name:s.name,description:s.description,isActive:s.isActive}),s.authType===K.BASIC&&s.basicAuth&&h({username:s.basicAuth.username,password:"",realm:s.basicAuth.realm||""}),s.authType===K.OAUTH2&&s.oauth2&&m({clientId:s.oauth2.clientId,clientSecret:"",authorizationUrl:s.oauth2.authorizationUrl||"",tokenUrl:s.oauth2.tokenUrl||"",redirectUri:s.oauth2.redirectUri||"",scope:s.oauth2.scope||"",grantType:s.oauth2.grantType,usePkce:s.oauth2.usePkce}),s.authType===K.API_KEY&&s.apiKey&&(d({apiKey:"",keyPrefix:s.apiKey.keyPrefix||"",headerName:s.apiKey.headerName,queryParamName:s.apiKey.queryParamName||"",rateLimitPerHour:s.apiKey.rateLimitPerHour,allowedIps:s.apiKey.allowedIps||[]}),y(s.apiKey.allowedIps?.join(`
`)||""))},[s]);const N=async x=>{x.preventDefault(),o(!0);try{const g={...c};if(s.authType===K.BASIC){const T={};u.username&&(T.username=u.username),u.password&&(T.password=u.password),u.realm!==void 0&&(T.realm=u.realm),Object.keys(T).length>0&&(g.basicAuth=T)}else if(s.authType===K.OAUTH2){const T={};f.clientId&&(T.clientId=f.clientId),f.clientSecret&&(T.clientSecret=f.clientSecret),f.authorizationUrl!==void 0&&(T.authorizationUrl=f.authorizationUrl),f.tokenUrl!==void 0&&(T.tokenUrl=f.tokenUrl),f.redirectUri!==void 0&&(T.redirectUri=f.redirectUri),f.scope!==void 0&&(T.scope=f.scope),f.grantType&&(T.grantType=f.grantType),f.usePkce!==void 0&&(T.usePkce=f.usePkce),Object.keys(T).length>0&&(g.oauth2=T)}else if(s.authType===K.API_KEY){const T={};p.apiKey&&(T.apiKey=p.apiKey),p.keyPrefix!==void 0&&(T.keyPrefix=p.keyPrefix),p.headerName&&(T.headerName=p.headerName),p.queryParamName!==void 0&&(T.queryParamName=p.queryParamName),p.rateLimitPerHour!==void 0&&(T.rateLimitPerHour=p.rateLimitPerHour);const H=j.split(`
`).map(w=>w.trim()).filter(w=>w.length>0);(H.length>0||j==="")&&(T.allowedIps=H),Object.keys(T).length>0&&(g.apiKey=T)}const b=await De.updateAuthConfig(s.id,g);if(Ts(b))if(b.success)n({title:"Success",description:"Authentication configuration updated successfully"}),r(),a(!1);else throw new Error(b.message||"Failed to update configuration");else n({title:"Success",description:"Authentication configuration updated successfully"}),r(),a(!1)}catch(g){P.error(E.AUTH,"Error updating auth config",{error:g}),n({title:"Error",description:g instanceof Error?g.message:"Failed to update authentication configuration",variant:"destructive"})}finally{o(!1)}};return e.jsx(Ne,{open:t,onOpenChange:a,children:e.jsx(be,{className:"max-w-2xl",children:e.jsxs("form",{onSubmit:N,children:[e.jsxs(we,{children:[e.jsx(Ce,{children:"Edit External Authentication"}),e.jsxs(Be,{children:["Update authentication configuration for ",s.name]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"name",children:"Name"}),e.jsx(M,{id:"name",value:c.name,onChange:x=>i({...c,name:x.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"description",children:"Description"}),e.jsx(Ze,{id:"description",value:c.description||"",onChange:x=>i({...c,description:x.target.value}),rows:2})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Xe,{id:"isActive",checked:c.isActive,onCheckedChange:x=>i({...c,isActive:x})}),e.jsx(C,{htmlFor:"isActive",children:"Active"})]}),e.jsxs("div",{className:"pt-4",children:[e.jsxs("h3",{className:"text-sm font-medium mb-4",children:[s.authType," Authentication Details"]}),s.authType===K.BASIC&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"username",children:"Username"}),e.jsx(M,{id:"username",value:u.username,onChange:x=>h({...u,username:x.target.value})})]}),e.jsx(Ee,{name:"password",label:"New Password (leave empty to keep current)",value:u.password||"",onValueChange:x=>h({...u,password:x}),showConfirmation:!1}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"realm",children:"Realm"}),e.jsx(M,{id:"realm",value:u.realm||"",onChange:x=>h({...u,realm:x.target.value})})]})]}),s.authType===K.OAUTH2&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"clientId",children:"Client ID"}),e.jsx(M,{id:"clientId",value:f.clientId,onChange:x=>m({...f,clientId:x.target.value})})]}),e.jsx(Ee,{name:"clientSecret",label:"Client Secret (leave empty to keep current)",value:f.clientSecret||"",onValueChange:x=>m({...f,clientSecret:x}),showConfirmation:!1}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"grantType",children:"Grant Type"}),e.jsxs(G,{value:f.grantType,onValueChange:x=>m({...f,grantType:x}),children:[e.jsx(ee,{children:e.jsx(se,{})}),e.jsxs(ae,{children:[e.jsx(L,{value:Z.CLIENT_CREDENTIALS,children:"Client Credentials"}),e.jsx(L,{value:Z.AUTHORIZATION_CODE,children:"Authorization Code"}),e.jsx(L,{value:Z.PASSWORD,children:"Password"}),e.jsx(L,{value:Z.REFRESH_TOKEN,children:"Refresh Token"})]})]})]}),f.grantType===Z.AUTHORIZATION_CODE&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"authorizationUrl",children:"Authorization URL"}),e.jsx(M,{id:"authorizationUrl",type:"url",value:f.authorizationUrl||"",onChange:x=>m({...f,authorizationUrl:x.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"redirectUri",children:"Redirect URI"}),e.jsx(M,{id:"redirectUri",type:"url",value:f.redirectUri||"",onChange:x=>m({...f,redirectUri:x.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"tokenUrl",children:"Token URL"}),e.jsx(M,{id:"tokenUrl",type:"url",value:f.tokenUrl||"",onChange:x=>m({...f,tokenUrl:x.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"scope",children:"Scope"}),e.jsx(M,{id:"scope",value:f.scope||"",onChange:x=>m({...f,scope:x.target.value})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Xe,{id:"usePkce",checked:f.usePkce||!1,onCheckedChange:x=>m({...f,usePkce:x})}),e.jsx(C,{htmlFor:"usePkce",children:"Use PKCE"})]})]}),s.authType===K.API_KEY&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ee,{name:"apiKey",label:"API Key (leave empty to keep current)",value:p.apiKey||"",onValueChange:x=>d({...p,apiKey:x}),showConfirmation:!1}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"headerName",children:"Header Name"}),e.jsx(M,{id:"headerName",value:p.headerName,onChange:x=>d({...p,headerName:x.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"keyPrefix",children:"Key Prefix"}),e.jsx(M,{id:"keyPrefix",value:p.keyPrefix||"",onChange:x=>d({...p,keyPrefix:x.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"queryParamName",children:"Query Parameter Name"}),e.jsx(M,{id:"queryParamName",value:p.queryParamName||"",onChange:x=>d({...p,queryParamName:x.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"rateLimitPerHour",children:"Rate Limit per Hour"}),e.jsx(M,{id:"rateLimitPerHour",type:"number",value:p.rateLimitPerHour||"",onChange:x=>d({...p,rateLimitPerHour:x.target.value?parseInt(x.target.value):void 0})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"allowedIps",children:"Allowed IPs"}),e.jsx(Ze,{id:"allowedIps",value:j,onChange:x=>y(x.target.value),rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter IP addresses or CIDR ranges, one per line"})]}),s.apiKey&&e.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Usage: ",s.apiKey.usageCount," requests;"]}),s.apiKey.lastUsedAt&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Last used: ",new Date(s.apiKey.lastUsedAt).toLocaleString(),s.apiKey.lastUsedIp&&` from ${s.apiKey.lastUsedIp}`]})]})]})]})]}),e.jsxs(as,{children:[e.jsx(S,{type:"button",variant:"outline",onClick:()=>a(!1),disabled:l,children:"Cancel"}),e.jsx(S,{type:"submit",disabled:l,children:l?"Updating...":"Update Configuration"})]})]})})})}function dn({configId:s,open:t,onOpenChange:a}){const[r,n]=v.useState([]),[l,o]=v.useState(!0),c=v.useCallback(async()=>{o(!0);try{const i=await De.getAuthAttempts(s,100);Ts(i)?i.success&&i.data&&n(i.data):Array.isArray(i)&&n(i)}catch(i){P.error(E.AUTH,"Failed to fetch auth attempts",{error:i}),n([])}finally{o(!1)}},[s]);return v.useEffect(()=>{t&&c()},[t,s,c]),e.jsx(Ne,{open:t,onOpenChange:a,children:e.jsxs(be,{className:"max-w-4xl",children:[e.jsx(we,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Ce,{children:"Authentication Attempt Logs"}),e.jsx(Be,{children:"Recent authentication attempts for this configuration"})]}),e.jsxs(S,{variant:"outline",size:"sm",onClick:c,disabled:l,children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})}),e.jsx(Qe,{className:"h-[500px] w-full rounded-md border p-4",children:l?e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((i,u)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsx(A,{className:"h-4 w-24"}),e.jsx(A,{className:"h-4 w-32"}),e.jsx(A,{className:"h-4 w-20"}),e.jsx(A,{className:"h-4 w-16"})]},u))}):r.length===0?e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No authentication attempts recorded yet"}):e.jsx("div",{className:"space-y-3",children:r.map(i=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[i.success?e.jsx(ja,{className:"h-5 w-5 text-green-600"}):e.jsx(ca,{className:"h-5 w-5 text-red-600"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:i.username||i.apiKeyPrefix||"Unknown"}),e.jsx(O,{variant:i.success?"default":"destructive",children:i.success?"Success":"Failed"})]}),i.failureReason&&e.jsx("p",{className:"text-sm text-muted-foreground",children:i.failureReason})]})]}),e.jsxs("div",{className:"text-right text-sm",children:[e.jsx("p",{className:"text-muted-foreground",children:de(new Date(i.createdAt),"MMM d, HH:mm:ss")}),i.ipAddress&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["From ",i.ipAddress]})]})]},i.id))})})]})})}function un({authConfigs:s,isLoading:t,onRefresh:a}){const{toast:r}=ce(),[n,l]=v.useState(!1),[o,c]=v.useState(null),[i,u]=v.useState(null),[h,f]=v.useState(null),m=g=>{switch(g){case K.BASIC:return e.jsx(Ke,{className:"h-4 w-4"});case K.API_KEY:return e.jsx(Re,{className:"h-4 w-4"});case K.OAUTH2:return e.jsx(ge,{className:"h-4 w-4"});case K.OAUTH1:return e.jsx(it,{className:"h-4 w-4"});default:return e.jsx(ge,{className:"h-4 w-4"})}},p=g=>{switch(g){case K.BASIC:return"secondary";case K.API_KEY:return"outline";case K.OAUTH2:return"default";case K.OAUTH1:return"destructive";default:return"default"}},d=async g=>{try{const b=await De.updateAuthConfig(g.id,{isActive:!g.isActive});if(b&&typeof b=="object"&&"success"in b&&b.success)r({title:"Success",description:`Authentication configuration ${g.isActive?"deactivated":"activated"} successfully`}),a();else throw new Error((b&&typeof b=="object"&&"message"in b?b.message:void 0)||"Failed to update configuration")}catch(b){P.error(E.AUTH,"Error toggling auth config status",{error:b}),r({title:"Error",description:"Failed to update authentication status",variant:"destructive"})}},j=async g=>{if(confirm(`Are you sure you want to delete "${g.name}"? This action cannot be undone.`)){f(g.id);try{const b=await De.deleteAuthConfig(g.id);if(b&&typeof b=="object"&&"success"in b&&b.success)r({title:"Success",description:"Authentication configuration deleted successfully"}),a();else throw new Error((b&&typeof b=="object"&&"message"in b?b.message:void 0)||"Failed to delete configuration")}catch(b){P.error(E.AUTH,"Error deleting auth config",{error:b}),r({title:"Error",description:"Failed to delete authentication configuration",variant:"destructive"})}finally{f(null)}}},y=async g=>{try{const b=await De.testAuthConfig(g.id);if(b&&typeof b=="object"&&"success"in b&&b.success)r({title:"Success",description:"Authentication test completed successfully"});else throw new Error((b&&typeof b=="object"&&"message"in b?b.message:void 0)||"Test failed")}catch(b){P.error(E.AUTH,"Error testing auth config",{error:b}),r({title:"Error",description:"Authentication test failed",variant:"destructive"})}},N=[{key:"name",header:"Name",cell:g=>e.jsxs("div",{className:"flex items-center gap-2",children:[m(g.authType),e.jsx("span",{className:"font-medium",children:g.name})]})},{key:"authType",header:"Type",cell:g=>e.jsx(O,{variant:p(g.authType),children:g.authType})},{key:"description",header:"Description",cell:g=>e.jsx("span",{className:"text-sm text-muted-foreground",children:g.description||"-"})},{key:"isActive",header:"Status",cell:g=>e.jsx(O,{variant:g.isActive?"default":"secondary",children:g.isActive?"Active":"Inactive"})},{key:"createdAt",header:"Created",cell:g=>e.jsx("span",{className:"text-sm text-muted-foreground",children:de(new Date(g.createdAt),"MMM d, yyyy")})}],x=[{label:"Edit",icon:rs,onClick:g=>c(g)},{label:"Toggle Status",icon:lt,onClick:g=>d(g)},{label:"Test Connection",icon:za,onClick:g=>y(g)},{label:"View Attempts",icon:ge,onClick:g=>u(g.id)},{label:"Delete",icon:Ds,onClick:g=>j(g),variant:"destructive"}];return t?e.jsxs(U,{children:[e.jsxs(q,{children:[e.jsx(V,{children:"External Authentication"}),e.jsx(re,{children:"Loading authentication configurations..."})]}),e.jsx(R,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(A,{className:"h-10 w-full"}),e.jsx(A,{className:"h-32 w-full"})]})})]}):e.jsxs(e.Fragment,{children:[e.jsxs(U,{children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(V,{children:"External Authentication"}),e.jsx(re,{children:"Manage authentication configurations for HTTP/S adapters"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(S,{variant:"outline",size:"sm",onClick:a,children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(S,{size:"sm",onClick:()=>l(!0),children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Add Authentication"]})]})]})}),e.jsx(R,{children:e.jsx(ln,{columns:N,data:s,actions:x,keyField:"id",searchable:!0,searchPlaceholder:"Search configurations..."})})]}),e.jsx(on,{open:n,onOpenChange:l,onCreated:a}),o&&e.jsx(cn,{config:o,open:!!o,onOpenChange:g=>!g&&c(null),onUpdated:a}),i&&e.jsx(dn,{configId:i,open:!!i,onOpenChange:g=>!g&&u(null)})]})}class hn{async getAllRoles(t=0,a=50){return B.get(`/roles?page=${t}&limit=${a}`)}async getRoleById(t){return B.get(`/roles/${t}`)}async createRole(t){return B.post("/roles",t)}async updateRole(t,a){return B.put(`/roles/${t}`,a)}async deleteRole(t){return B.delete(`/roles/${t}`)}async addPermission(t,a){return B.post(`/roles/${t}/permissions`,{permission:a})}async removePermission(t,a){return B.delete(`/roles/${t}/permissions/${a}`)}async updatePermissions(t,a){return B.put(`/roles/${t}/permissions`,{permissions:a})}async getRolePermissions(t){return B.get(`/roles/${t}/permissions`)}async searchRoles(t,a){const r=new URLSearchParams({q:t,...a?.hasPermission&&{hasPermission:a.hasPermission},page:(a?.page||1).toString(),limit:(a?.limit||50).toString()});return B.get(`/roles/search?${r}`)}async getRoleUsers(t){return B.get(`/roles/${t}/users`)}async cloneRole(t,a){return B.post(`/roles/${t}/clone`,{name:a})}async getAvailablePermissions(){return B.get("/roles/available-permissions")}async validatePermissions(t){return B.post("/roles/validate-permissions",{permissions:t})}}const mn=new hn,Vn=()=>{const{toast:s}=ce(),[t,a]=v.useState([]),[r,n]=v.useState(!0),[l,o]=v.useState([]),[c,i]=v.useState(!0),[u,h]=v.useState([]),[f,m]=v.useState(!0),[p,d]=v.useState([]),[j,y]=v.useState(!0),[N,x]=v.useState([]),[g,b]=v.useState(!0),[T,H]=v.useState("users"),w=v.useCallback(async()=>{try{n(!0);const k=await Pe.getAllUsers();if(P.info(E.SYSTEM,"Debug info",{data:{data:"User fetch response:",extra:k}}),k.success&&k.data){const fe=Array.isArray(k.data)?k.data:k.data.users;a(fe||[])}else P.error(E.ERROR,"Failed to fetch users",{error:k.error}),P.info(E.SYSTEM,"API not available, showing empty user list"),a([]),s({title:"Error",description:"Failed to load users",variant:"destructive"})}catch(k){P.error(E.ERROR,"Error fetching users",{error:k}),P.info(E.SYSTEM,"API error, showing empty user list"),a([]),s({title:"Error",description:"Failed to load users",variant:"destructive"})}finally{n(!1)}},[s]),Q=v.useCallback(async()=>{try{i(!0);const k=await mn.getAllRoles();if(P.info(E.SYSTEM,"Role fetch response",{data:k}),k.success&&k.data){const fe=Array.isArray(k.data)?k.data:[];o(fe)}else P.error(E.ERROR,"Failed to fetch roles",{error:k.error}),o([]),s({title:"Error",description:"Failed to load roles",variant:"destructive"})}catch(k){P.error(E.ERROR,"Error fetching roles",{error:k}),o([]),s({title:"Error",description:"Failed to load roles",variant:"destructive"})}finally{i(!1)}},[s]),F=v.useCallback(async()=>{try{m(!0);const k=await Ra.getAllCertificates();P.info(E.SYSTEM,"Certificate fetch response",{data:k}),k.success&&k.data?h(k.data):(P.error(E.ERROR,"Failed to fetch certificates",{error:k.error}),h([]),s({title:"Error",description:"Failed to load certificates",variant:"destructive"}))}catch(k){P.error(E.ERROR,"Error fetching certificates",{error:k}),h([]),s({title:"Error",description:"Failed to load certificates",variant:"destructive"})}finally{m(!1)}},[s]),Se=v.useCallback(async()=>{try{y(!0);const k=await Oa.getAllJarFiles();P.info(E.SYSTEM,"JAR files fetch response",{data:k}),k.success&&k.data?d(k.data):(P.error(E.ERROR,"Failed to fetch JAR files",{error:k.error}),d([]),s({title:"Error",description:"Failed to load JAR files",variant:"destructive"}))}catch(k){P.error(E.ERROR,"Error fetching JAR files",{error:k}),d([]),s({title:"Error",description:"Failed to load JAR files",variant:"destructive"})}finally{y(!1)}},[s]),ke=v.useCallback(async()=>{try{b(!0);const k=await De.getAllAuthConfigs();P.info(E.AUTH,"Auth configs fetch response",{data:k}),"success"in k&&k.success&&k.data?x(k.data):Array.isArray(k)?x(k):(P.error(E.AUTH,"Failed to fetch auth configs:","message"in k?k.message:"Unknown error"),x([]),s({title:"Error",description:"Failed to load authentication configurations",variant:"destructive"}))}catch(k){P.error(E.AUTH,"Error fetching auth configs",{error:k}),x([]),s({title:"Error",description:"Failed to load authentication configurations",variant:"destructive"})}finally{b(!1)}},[s]);v.useEffect(()=>{w(),Q(),F(),Se(),ke()},[w,Q,F,Se,ke]);const me=k=>{d(fe=>[...fe,k])},xe=k=>{d(fe=>fe.filter(is=>is.id!==k))};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[e.jsx(Ae,{className:"h-8 w-8"}),"Admin Panel"]}),e.jsx("p",{className:"text-muted-foreground",children:"Manage users, roles, and system security"})]}),e.jsx(ot,{users:t,roles:l,certificates:u,jarFiles:p}),e.jsxs(es,{value:T,onValueChange:H,className:"space-y-6 animate-fade-in",style:{animationDelay:"0.1s"},children:[e.jsxs(ss,{className:"grid w-full grid-cols-8",children:[e.jsxs(Y,{value:"users",className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-4 w-4"}),"Users"]}),e.jsxs(Y,{value:"roles",className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-4 w-4"}),"Roles"]}),e.jsxs(Y,{value:"certificates",className:"flex items-center gap-2",children:[e.jsx(Re,{className:"h-4 w-4"}),"Certificates"]}),e.jsxs(Y,{value:"external-auth",className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"h-4 w-4"}),"External Auth"]}),e.jsxs(Y,{value:"jar-files",className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-4 w-4"}),"Drivers"]}),e.jsxs(Y,{value:"adapter-types",className:"flex items-center gap-2",children:[e.jsx(As,{className:"h-4 w-4"}),"Adapters"]}),e.jsxs(Y,{value:"system-settings",className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4"}),"Settings"]}),e.jsxs(Y,{value:"system-logs",className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"h-4 w-4"}),"Logs"]})]}),e.jsx(J,{value:"users",className:"space-y-4",children:e.jsx(mt,{users:t,isLoading:r,onRefresh:w})}),e.jsx(J,{value:"roles",className:"space-y-4",children:e.jsx(xt,{roles:l,isLoading:c,onRefresh:Q})}),e.jsx(J,{value:"certificates",className:"space-y-4",children:e.jsx(ft,{certificates:u,isLoading:f,onRefresh:F})}),e.jsx(J,{value:"external-auth",className:"space-y-4",children:e.jsx(un,{authConfigs:N,isLoading:g,onRefresh:ke})}),e.jsx(J,{value:"jar-files",className:"space-y-4",children:e.jsx(gt,{jarFiles:p,isLoading:j,onRefresh:Se,onJarFileAdded:me,onJarFileDeleted:xe})}),e.jsx(J,{value:"adapter-types",className:"space-y-4",children:e.jsx(an,{})}),e.jsx(J,{value:"system-settings",className:"space-y-4",children:e.jsx(rn,{})}),e.jsx(J,{value:"system-logs",className:"space-y-4",children:e.jsx(sn,{})})]})]})};export{Vn as Admin};
